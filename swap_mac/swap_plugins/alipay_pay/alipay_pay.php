<?php  defined('SWAP_ROOT') or die('非法操作'); function alipay_pay_config(){ $OSWAP_71c9e43d00cec6c66d14ce69901fc451['swap_plug']='支付宝支付接口'; $OSWAP_71c9e43d00cec6c66d14ce69901fc451['swap_plug_version']='1.0'; $OSWAP_71c9e43d00cec6c66d14ce69901fc451['swap_plug_explain']=<<<SWAP
用于SWAPIDC的支付宝支付接口插件.
SWAP;
 $OSWAP_71c9e43d00cec6c66d14ce69901fc451['swap_plug_author']='施健'; $OSWAP_71c9e43d00cec6c66d14ce69901fc451['swap_plug_website']='http://www.dayyun.com/'; return $OSWAP_71c9e43d00cec6c66d14ce69901fc451; } function alipay_pay() { TEMPLATE::assign('config',alipay_pay_config()); TEMPLATE::assign('qina',plug_eva('alipay_pay','货币前缀')); TEMPLATE::assign('hou',plug_eva('alipay_pay','货币后缀')); TEMPLATE::assign('huilu',plug_eva('alipay_pay','交易币汇率')); TEMPLATE::assign('pul',plug_lang_get('alipay_pay','main')); TEMPLATE::display(SWAP_PLUGINS.'alipay_pay/templates/pupay.tpl'); } add_swap_plug("存款支付网关前端","alipay_pay"); function alipay_pay_adminlb(&$OSWAP_069bbeea030ba8448b7b3c80bac8bda0){ $OSWAP_069bbeea030ba8448b7b3c80bac8bda0[]=array('name'=>'支付宝支付接口','link'=>'/index.php/plugin/alipay_pay/admin/'); } add_swap_plug('管理员菜单列表','alipay_pay_adminlb'); function createLinkstring($OSWAP_98e57760c0002273d86b28deb5f4eb4a) { $OSWAP_b27548134789ba6a93b585a881e0da5f = ""; while (list ($OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda, $OSWAP_ace39049a7cb87d3b51db7e8c93bde7f) = each ($OSWAP_98e57760c0002273d86b28deb5f4eb4a)) { $OSWAP_b27548134789ba6a93b585a881e0da5f.=$OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda."=".$OSWAP_ace39049a7cb87d3b51db7e8c93bde7f."&"; } $OSWAP_b27548134789ba6a93b585a881e0da5f = substr($OSWAP_b27548134789ba6a93b585a881e0da5f,0,count($OSWAP_b27548134789ba6a93b585a881e0da5f)-2); if(get_magic_quotes_gpc()){$OSWAP_b27548134789ba6a93b585a881e0da5f = stripslashes($OSWAP_b27548134789ba6a93b585a881e0da5f);} return $OSWAP_b27548134789ba6a93b585a881e0da5f; } function createLinkstringUrlencode($OSWAP_98e57760c0002273d86b28deb5f4eb4a) { $OSWAP_b27548134789ba6a93b585a881e0da5f = ""; while (list ($OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda, $OSWAP_ace39049a7cb87d3b51db7e8c93bde7f) = each ($OSWAP_98e57760c0002273d86b28deb5f4eb4a)) { $OSWAP_b27548134789ba6a93b585a881e0da5f.=$OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda."=".urlencode($OSWAP_ace39049a7cb87d3b51db7e8c93bde7f)."&"; } $OSWAP_b27548134789ba6a93b585a881e0da5f = substr($OSWAP_b27548134789ba6a93b585a881e0da5f,0,count($OSWAP_b27548134789ba6a93b585a881e0da5f)-2); if(get_magic_quotes_gpc()){$OSWAP_b27548134789ba6a93b585a881e0da5f = stripslashes($OSWAP_b27548134789ba6a93b585a881e0da5f);} return $OSWAP_b27548134789ba6a93b585a881e0da5f; } function paraFilter($OSWAP_98e57760c0002273d86b28deb5f4eb4a) { $OSWAP_97e24ed945dae4dbe0b0ae391af673d5 = array(); while (list ($OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda, $OSWAP_ace39049a7cb87d3b51db7e8c93bde7f) = each ($OSWAP_98e57760c0002273d86b28deb5f4eb4a)) { if($OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda == "sign" || $OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda == "sign_type" || $OSWAP_ace39049a7cb87d3b51db7e8c93bde7f == "")continue; else $OSWAP_97e24ed945dae4dbe0b0ae391af673d5[$OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda] = $OSWAP_98e57760c0002273d86b28deb5f4eb4a[$OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda]; } return $OSWAP_97e24ed945dae4dbe0b0ae391af673d5; } function argSort($OSWAP_98e57760c0002273d86b28deb5f4eb4a) { ksort($OSWAP_98e57760c0002273d86b28deb5f4eb4a); reset($OSWAP_98e57760c0002273d86b28deb5f4eb4a); return $OSWAP_98e57760c0002273d86b28deb5f4eb4a; } function logResult($OSWAP_cc79c9d4283e07e6fd8daf96873cc302='') { $fp = fopen("log.txt","a"); flock($fp, LOCK_EX) ; fwrite($fp,"执行日期：".strftime("%Y%m%d%H%M%S",time())."\n".$OSWAP_cc79c9d4283e07e6fd8daf96873cc302."\n"); flock($fp, LOCK_UN); fclose($fp); } function getHttpResponsePOST($OSWAP_40284ac39e424d5e28e49bbef1c8a6d5, $OSWAP_d50ecd6417a5f157f7010f90a93af75c, $OSWAP_98e57760c0002273d86b28deb5f4eb4a, $OSWAP_a74bb74f098e8593273f969e2367620b = '') { if (trim($OSWAP_a74bb74f098e8593273f969e2367620b) != '') { $OSWAP_40284ac39e424d5e28e49bbef1c8a6d5 = $OSWAP_40284ac39e424d5e28e49bbef1c8a6d5."_input_charset=".$OSWAP_a74bb74f098e8593273f969e2367620b; } $OSWAP_4bd09ab02d500d281fbfadc042579e46 = curl_init($OSWAP_40284ac39e424d5e28e49bbef1c8a6d5); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_CAINFO,$OSWAP_d50ecd6417a5f157f7010f90a93af75c); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_HEADER, 0 ); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46,CURLOPT_RETURNTRANSFER, 1); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46,CURLOPT_POST,true); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46,CURLOPT_POSTFIELDS,$OSWAP_98e57760c0002273d86b28deb5f4eb4a); $OSWAP_f3d50a28e7ec12150cf93b732856f032 = curl_exec($OSWAP_4bd09ab02d500d281fbfadc042579e46); curl_close($OSWAP_4bd09ab02d500d281fbfadc042579e46); return $OSWAP_f3d50a28e7ec12150cf93b732856f032; } function getHttpResponseGET($OSWAP_40284ac39e424d5e28e49bbef1c8a6d5,$OSWAP_d50ecd6417a5f157f7010f90a93af75c) { $OSWAP_4bd09ab02d500d281fbfadc042579e46 = curl_init($OSWAP_40284ac39e424d5e28e49bbef1c8a6d5); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_HEADER, 0 ); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46,CURLOPT_RETURNTRANSFER, 1); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($OSWAP_4bd09ab02d500d281fbfadc042579e46, CURLOPT_CAINFO,$OSWAP_d50ecd6417a5f157f7010f90a93af75c); $OSWAP_f3d50a28e7ec12150cf93b732856f032 = curl_exec($OSWAP_4bd09ab02d500d281fbfadc042579e46); curl_close($OSWAP_4bd09ab02d500d281fbfadc042579e46); return $OSWAP_f3d50a28e7ec12150cf93b732856f032; } function charsetEncode($OSWAP_be57d0a73d9cfa6791011ecd1aa5e895,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28 ,$OSWAP_a10026fd5c7d1bea530e3c0462e42e96) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = ""; if(!isset($OSWAP_cd031528cc899a5eb14c1ad2d2868d28) )$OSWAP_cd031528cc899a5eb14c1ad2d2868d28 = $OSWAP_a10026fd5c7d1bea530e3c0462e42e96; if($OSWAP_a10026fd5c7d1bea530e3c0462e42e96 == $OSWAP_cd031528cc899a5eb14c1ad2d2868d28 || $OSWAP_be57d0a73d9cfa6791011ecd1aa5e895 ==null ) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = $OSWAP_be57d0a73d9cfa6791011ecd1aa5e895; } elseif (function_exists("mb_convert_encoding")) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = mb_convert_encoding($OSWAP_be57d0a73d9cfa6791011ecd1aa5e895,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28,$OSWAP_a10026fd5c7d1bea530e3c0462e42e96); } elseif(function_exists("iconv")) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = iconv($OSWAP_a10026fd5c7d1bea530e3c0462e42e96,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28,$OSWAP_be57d0a73d9cfa6791011ecd1aa5e895); } else die("sorry, you have no libs support for charset change."); return $OSWAP_bd4312802b07f71c9ccb42d784952bff; } function charsetDecode($OSWAP_be57d0a73d9cfa6791011ecd1aa5e895,$OSWAP_a10026fd5c7d1bea530e3c0462e42e96 ,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = ""; if(!isset($OSWAP_a10026fd5c7d1bea530e3c0462e42e96) )$OSWAP_a10026fd5c7d1bea530e3c0462e42e96 = $OSWAP_a10026fd5c7d1bea530e3c0462e42e96 ; if($OSWAP_a10026fd5c7d1bea530e3c0462e42e96 == $OSWAP_cd031528cc899a5eb14c1ad2d2868d28 || $OSWAP_be57d0a73d9cfa6791011ecd1aa5e895 ==null ) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = $OSWAP_be57d0a73d9cfa6791011ecd1aa5e895; } elseif (function_exists("mb_convert_encoding")) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = mb_convert_encoding($OSWAP_be57d0a73d9cfa6791011ecd1aa5e895,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28,$OSWAP_a10026fd5c7d1bea530e3c0462e42e96); } elseif(function_exists("iconv")) { $OSWAP_bd4312802b07f71c9ccb42d784952bff = iconv($OSWAP_a10026fd5c7d1bea530e3c0462e42e96,$OSWAP_cd031528cc899a5eb14c1ad2d2868d28,$OSWAP_be57d0a73d9cfa6791011ecd1aa5e895); } else die("sorry, you have no libs support for charset changes."); return $OSWAP_bd4312802b07f71c9ccb42d784952bff; } class AlipayNotify { var $OSWAP_2da0c5a67815ec27248984975943d697 = 'https://mapi.alipay.com/gateway.do?service=notify_verify&'; var $OSWAP_06b3a7d101a3e1667b54047be65c65b5 = 'http://notify.alipay.com/trade/notify_query.do?'; var $OSWAP_2662881b5ec6cf8a6adf42d628fc6256; function __construct($OSWAP_2662881b5ec6cf8a6adf42d628fc6256){ $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256 = $OSWAP_2662881b5ec6cf8a6adf42d628fc6256; } function AlipayNotify($OSWAP_2662881b5ec6cf8a6adf42d628fc6256) { $this->__construct($OSWAP_2662881b5ec6cf8a6adf42d628fc6256); } function verifyNotify(){ if(empty($_POST)) { return false; } else { $OSWAP_e9a23938092da4a3dfad510ebaff004d = $this->getSignVeryfy($_POST, $_POST["sign"]); $OSWAP_774f3a2665039f4e39667b350af506e1 = 'true'; if (! empty($_POST["notify_id"])) {$OSWAP_774f3a2665039f4e39667b350af506e1 = $this->getResponse($_POST["notify_id"]);} if (preg_match("/true$/i",$OSWAP_774f3a2665039f4e39667b350af506e1) && $OSWAP_e9a23938092da4a3dfad510ebaff004d) { return true; } else { return false; } } } function verifyReturn(){ if(empty($_GET)) { return false; } else { $OSWAP_e9a23938092da4a3dfad510ebaff004d = $this->getSignVeryfy($_GET, $_GET["sign"]); $OSWAP_774f3a2665039f4e39667b350af506e1 = 'true'; if (! empty($_GET["notify_id"])) {$OSWAP_774f3a2665039f4e39667b350af506e1 = $this->getResponse($_GET["notify_id"]);} if (preg_match("/true$/i",$OSWAP_774f3a2665039f4e39667b350af506e1) && $OSWAP_e9a23938092da4a3dfad510ebaff004d) { return true; } else { return false; } } } function getSignVeryfy($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1, $OSWAP_1834e0baf6688fc216152a5985dee398) { $OSWAP_97e24ed945dae4dbe0b0ae391af673d5 = paraFilter($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_55bb94d109ed3c59b586c8c803ce3666 = argSort($OSWAP_97e24ed945dae4dbe0b0ae391af673d5); $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 = createLinkstring($OSWAP_55bb94d109ed3c59b586c8c803ce3666); $OSWAP_ab9dfd493ba209fcdd0833a2bfc3ee56 = false; switch (strtoupper(trim($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['sign_type']))) { case "MD5" : $OSWAP_ab9dfd493ba209fcdd0833a2bfc3ee56 = md5Verify($OSWAP_dc21549b6899cc04b7e7726c40dcfb38, $OSWAP_1834e0baf6688fc216152a5985dee398, $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['key']); break; default : $OSWAP_ab9dfd493ba209fcdd0833a2bfc3ee56 = false; } return $OSWAP_ab9dfd493ba209fcdd0833a2bfc3ee56; } function getResponse($OSWAP_3ae9b532204cd8af5c908fb9824d4083) { $OSWAP_d4ba0bc8ab5793593b7590b6f32bafce = strtolower(trim($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['transport'])); $OSWAP_9b2bd7ebae4807a16bec83c2f76082b5 = trim($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['partner']); $OSWAP_a940020d71c5e32f7e24b64217d985f6 = ''; if($OSWAP_d4ba0bc8ab5793593b7590b6f32bafce == 'https') { $OSWAP_a940020d71c5e32f7e24b64217d985f6 = $this->OSWAP_2da0c5a67815ec27248984975943d697; } else { $OSWAP_a940020d71c5e32f7e24b64217d985f6 = $this->OSWAP_06b3a7d101a3e1667b54047be65c65b5; } $OSWAP_a940020d71c5e32f7e24b64217d985f6 = $OSWAP_a940020d71c5e32f7e24b64217d985f6."partner=" . $OSWAP_9b2bd7ebae4807a16bec83c2f76082b5 . "&notify_id=" . $OSWAP_3ae9b532204cd8af5c908fb9824d4083; $OSWAP_774f3a2665039f4e39667b350af506e1 = getHttpResponseGET($OSWAP_a940020d71c5e32f7e24b64217d985f6, $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['cacert']); return $OSWAP_774f3a2665039f4e39667b350af506e1; } } function md5Sign($OSWAP_dc21549b6899cc04b7e7726c40dcfb38, $OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda) { $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 = $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 . $OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda; return md5($OSWAP_dc21549b6899cc04b7e7726c40dcfb38); } function md5Verify($OSWAP_dc21549b6899cc04b7e7726c40dcfb38, $OSWAP_1834e0baf6688fc216152a5985dee398, $OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda) { $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 = $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 . $OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda; $OSWAP_4a816b2bfc135405724faf2d936d3150 = md5($OSWAP_dc21549b6899cc04b7e7726c40dcfb38); if($OSWAP_4a816b2bfc135405724faf2d936d3150 == $OSWAP_1834e0baf6688fc216152a5985dee398) { return true; } else { return false; } } class AlipaySubmit { var $OSWAP_2662881b5ec6cf8a6adf42d628fc6256; var $OSWAP_6f1305d3eb58de24a1dce9b9f5ae55b9 = 'https://mapi.alipay.com/gateway.do?'; function __construct($OSWAP_2662881b5ec6cf8a6adf42d628fc6256){ $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256 = $OSWAP_2662881b5ec6cf8a6adf42d628fc6256; } function AlipaySubmit($OSWAP_2662881b5ec6cf8a6adf42d628fc6256) { $this->__construct($OSWAP_2662881b5ec6cf8a6adf42d628fc6256); } function buildRequestMysign($OSWAP_55bb94d109ed3c59b586c8c803ce3666) { $OSWAP_dc21549b6899cc04b7e7726c40dcfb38 = createLinkstring($OSWAP_55bb94d109ed3c59b586c8c803ce3666); $OSWAP_205b2ddd1cb923e12f91e5055659e358 = ""; switch (strtoupper(trim($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['sign_type']))) { case "MD5" : $OSWAP_205b2ddd1cb923e12f91e5055659e358 = md5Sign($OSWAP_dc21549b6899cc04b7e7726c40dcfb38, $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['key']); break; default : $OSWAP_205b2ddd1cb923e12f91e5055659e358 = ""; } return $OSWAP_205b2ddd1cb923e12f91e5055659e358; } function buildRequestPara($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1) { $OSWAP_97e24ed945dae4dbe0b0ae391af673d5 = paraFilter($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_55bb94d109ed3c59b586c8c803ce3666 = argSort($OSWAP_97e24ed945dae4dbe0b0ae391af673d5); $OSWAP_205b2ddd1cb923e12f91e5055659e358 = $this->buildRequestMysign($OSWAP_55bb94d109ed3c59b586c8c803ce3666); $OSWAP_55bb94d109ed3c59b586c8c803ce3666['sign'] = $OSWAP_205b2ddd1cb923e12f91e5055659e358; $OSWAP_55bb94d109ed3c59b586c8c803ce3666['sign_type'] = strtoupper(trim($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['sign_type'])); return $OSWAP_55bb94d109ed3c59b586c8c803ce3666; } function buildRequestParaToString($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1) { $OSWAP_98e57760c0002273d86b28deb5f4eb4a = $this->buildRequestPara($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_b9b771159445d041e7e706ce86299ae5 = createLinkstringUrlencode($OSWAP_98e57760c0002273d86b28deb5f4eb4a); return $OSWAP_b9b771159445d041e7e706ce86299ae5; } function buildRequestForm($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1, $OSWAP_24f56942e71059d846a7a2a88344117a, $OSWAP_753250b7845508f4e3f12428e032bbcb) { $OSWAP_98e57760c0002273d86b28deb5f4eb4a = $this->buildRequestPara($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_9315a1c8ac50c95e0ab9639788aa9223 = "<form id='alipaysubmit' name='alipaysubmit' action='".$this->OSWAP_6f1305d3eb58de24a1dce9b9f5ae55b9."_input_charset=".trim(strtolower($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['input_charset']))."' method='".$OSWAP_24f56942e71059d846a7a2a88344117a."'>"; while (list ($OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda, $OSWAP_ace39049a7cb87d3b51db7e8c93bde7f) = each ($OSWAP_98e57760c0002273d86b28deb5f4eb4a)) { $OSWAP_9315a1c8ac50c95e0ab9639788aa9223.= "<input type='hidden' name='".$OSWAP_b7e306c6177a71e6f6606c5ab5ca3cda."' value='".$OSWAP_ace39049a7cb87d3b51db7e8c93bde7f."'/>"; } $OSWAP_9315a1c8ac50c95e0ab9639788aa9223 = $OSWAP_9315a1c8ac50c95e0ab9639788aa9223."</form>"; $OSWAP_9315a1c8ac50c95e0ab9639788aa9223 = $OSWAP_9315a1c8ac50c95e0ab9639788aa9223."<script>document.forms['alipaysubmit'].submit();</script>"; return $OSWAP_9315a1c8ac50c95e0ab9639788aa9223; } function buildRequestHttp($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1) { $OSWAP_3524d38f721a61b605bebcde28d9478d = ''; $OSWAP_b9b771159445d041e7e706ce86299ae5 = $this->buildRequestPara($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_3524d38f721a61b605bebcde28d9478d = getHttpResponsePOST($this->OSWAP_6f1305d3eb58de24a1dce9b9f5ae55b9, $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['cacert'],$OSWAP_b9b771159445d041e7e706ce86299ae5,trim(strtolower($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['input_charset']))); return $OSWAP_3524d38f721a61b605bebcde28d9478d; } function buildRequestHttpInFile($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1, $OSWAP_718fc8002746b1d9b549a4ac5edd6608, $OSWAP_6b95306725060f68ffa8d9ca0410ec4d) { $OSWAP_98e57760c0002273d86b28deb5f4eb4a = $this->buildRequestPara($OSWAP_e43fe0a717ec05afb7bba8f31957ebb1); $OSWAP_98e57760c0002273d86b28deb5f4eb4a[$OSWAP_718fc8002746b1d9b549a4ac5edd6608] = "@".$OSWAP_6b95306725060f68ffa8d9ca0410ec4d; $OSWAP_3524d38f721a61b605bebcde28d9478d = getHttpResponsePOST($this->OSWAP_6f1305d3eb58de24a1dce9b9f5ae55b9, $this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['cacert'],$OSWAP_98e57760c0002273d86b28deb5f4eb4a,trim(strtolower($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['input_charset']))); return $OSWAP_3524d38f721a61b605bebcde28d9478d; } function query_timestamp() { $OSWAP_40284ac39e424d5e28e49bbef1c8a6d5 = $this->OSWAP_6f1305d3eb58de24a1dce9b9f5ae55b9."service=query_timestamp&partner=".trim(strtolower($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['partner']))."&_input_charset=".trim(strtolower($this->OSWAP_2662881b5ec6cf8a6adf42d628fc6256['input_charset'])); $OSWAP_b56a28594dfd4ab13e2db32aad03445b = ""; $OSWAP_5de22c71742f3f1dbb6eb7be07cb64ac = new DOMDocument(); $OSWAP_5de22c71742f3f1dbb6eb7be07cb64ac->load($OSWAP_40284ac39e424d5e28e49bbef1c8a6d5); $OSWAP_fe766f41c1c00820c5fc667d07952e92 = $OSWAP_5de22c71742f3f1dbb6eb7be07cb64ac->getElementsByTagName( "encrypt_key" ); $OSWAP_b56a28594dfd4ab13e2db32aad03445b = $OSWAP_fe766f41c1c00820c5fc667d07952e92->item(0)->OSWAP_18fc8d51553d0808ac03a20e1cd79466; return $OSWAP_b56a28594dfd4ab13e2db32aad03445b; } } 
<?php  defined('SWAP_ROOT') or die('非法操作'); if(_POST('language')!='') cookie('language',_POST('language')); if(cookie('language')) $GLOBALS['swap_mac']['config']['language']=cookie('language'); else $GLOBALS['swap_mac']['config']=array_merge($GLOBALS['swap_mac']['config'],array('language'=>'Chinese')); if(file_exists(SWAP_LANG.$GLOBALS['swap_mac']['config']['language'])==false){ cookie('language',NULL); if(!file_exists(SWAP_LANG.'Chinese')) die(swap_main_error_module('无法加载语言包,并没有默认中文',$GLOBALS['swap_mac']['config']['language'])); else $GLOBALS['swap_mac']['config']['language']='Chinese'; } if(file_exists(SWAP_LANG.$GLOBALS['swap_mac']['config']['language'].SWAP_DIR_END.'lang_'.$GLOBALS['swap_mac']['c_str'].'.php')){ require SWAP_LANG.$GLOBALS['swap_mac']['config']['language'].SWAP_DIR_END.'lang_'.$GLOBALS['swap_mac']['c_str'].'.php'; isset($lang[$GLOBALS['swap_mac']['method']])?$GLOBALS['swap_mac']['template']->assign("lang",$lang[$GLOBALS['swap_mac']['method']],true):NULL; } $GLOBALS['swap_mac']['template']->assign("language",$GLOBALS['swap_mac']['config']['language'],true); $GLOBALS['swap_mac']['template']->assign("l",swap_listDirTree(SWAP_LANG),true); 
<?php  function get_cc_hash() { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "系统配置", "安全码",'1'); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $cc = $OSWAP_e77f888b3189036b06b7d47acf75d044["安全码"]; return $cc; } function isValidforPath($OSWAP_0d07de59261cc2c9023b194184c575fb) { if (( !is_string( $OSWAP_0d07de59261cc2c9023b194184c575fb ) || empty( $OSWAP_0d07de59261cc2c9023b194184c575fb ) )) { return false; } return true; } function encrypt($OSWAP_5c3b95c23603ea8a942881b485e13b13) { $OSWAP_6291cc79354613208317e7b10b238055=get_cc_hash(); srand((double)microtime() * 1000000); $OSWAP_4cb682e787a5abbcf709bf9716f00ac2 = md5(rand(0, 32000)); $OSWAP_0ddeba66fe67822b35379422fa9c9b2e = 0; $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 = ''; for($i = 0;$i < strlen($OSWAP_5c3b95c23603ea8a942881b485e13b13); $i++) { $OSWAP_0ddeba66fe67822b35379422fa9c9b2e = $OSWAP_0ddeba66fe67822b35379422fa9c9b2e == strlen($OSWAP_4cb682e787a5abbcf709bf9716f00ac2) ? 0 : $OSWAP_0ddeba66fe67822b35379422fa9c9b2e; $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 .= $OSWAP_4cb682e787a5abbcf709bf9716f00ac2[$OSWAP_0ddeba66fe67822b35379422fa9c9b2e].($OSWAP_5c3b95c23603ea8a942881b485e13b13[$i] ^ $OSWAP_4cb682e787a5abbcf709bf9716f00ac2[$OSWAP_0ddeba66fe67822b35379422fa9c9b2e++]); } return base64_encode(passport_key($OSWAP_875cb76aee37cd9607ffaa3b347e9b87, $OSWAP_6291cc79354613208317e7b10b238055)); } function decrypt($OSWAP_5c3b95c23603ea8a942881b485e13b13) { $OSWAP_6291cc79354613208317e7b10b238055=get_cc_hash(); $OSWAP_5c3b95c23603ea8a942881b485e13b13 = passport_key(base64_decode($OSWAP_5c3b95c23603ea8a942881b485e13b13), $OSWAP_6291cc79354613208317e7b10b238055); $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 = ''; for($i = 0;$i < strlen($OSWAP_5c3b95c23603ea8a942881b485e13b13); $i++) { $OSWAP_328c3903bdd42d84975e19b419b4fe15 = $OSWAP_5c3b95c23603ea8a942881b485e13b13[$i]; $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 .= $OSWAP_5c3b95c23603ea8a942881b485e13b13[++$i] ^ $OSWAP_328c3903bdd42d84975e19b419b4fe15; } return str_replace(array('&#39;'),array('\''),$OSWAP_875cb76aee37cd9607ffaa3b347e9b87); } function passport_key($OSWAP_5c3b95c23603ea8a942881b485e13b13, $OSWAP_4cb682e787a5abbcf709bf9716f00ac2) { $OSWAP_4cb682e787a5abbcf709bf9716f00ac2 = md5($OSWAP_4cb682e787a5abbcf709bf9716f00ac2); $OSWAP_0ddeba66fe67822b35379422fa9c9b2e = 0; $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 = ''; for($i = 0; $i < strlen($OSWAP_5c3b95c23603ea8a942881b485e13b13); $i++) { $OSWAP_0ddeba66fe67822b35379422fa9c9b2e = $OSWAP_0ddeba66fe67822b35379422fa9c9b2e == strlen($OSWAP_4cb682e787a5abbcf709bf9716f00ac2) ? 0 : $OSWAP_0ddeba66fe67822b35379422fa9c9b2e; $OSWAP_875cb76aee37cd9607ffaa3b347e9b87 .= $OSWAP_5c3b95c23603ea8a942881b485e13b13[$i] ^ $OSWAP_4cb682e787a5abbcf709bf9716f00ac2[$OSWAP_0ddeba66fe67822b35379422fa9c9b2e++]; } return $OSWAP_875cb76aee37cd9607ffaa3b347e9b87; } function getModuleType($id) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务器表", "控制面板", array( "id" => $id ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_5bed70325152f4f084fa2ddcf96f4b8b = $OSWAP_e77f888b3189036b06b7d47acf75d044["控制面板"]; return $OSWAP_5bed70325152f4f084fa2ddcf96f4b8b; } function ModuleBuildParams($id) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务", "", array( "id" => $id ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_80aae56c94a39be4baef592a143d390c_id = $id = $OSWAP_e77f888b3189036b06b7d47acf75d044["id"]; $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id = $OSWAP_e77f888b3189036b06b7d47acf75d044["帐号id"]; $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_e77f888b3189036b06b7d47acf75d044["域名"]; $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name = $OSWAP_e77f888b3189036b06b7d47acf75d044["用户名"]; $OSWAP_c9d58e6756676f02d347c255bcb6b03b = html_entity_decode( decrypt( $OSWAP_e77f888b3189036b06b7d47acf75d044["密码"] ) ); $OSWAP_c883aa8abd38ad1f44fb0363ec00999b = $OSWAP_e77f888b3189036b06b7d47acf75d044["产品id"]; $OSWAP_b7da14f6d30a57d6556466c8bacc5350 = $OSWAP_e77f888b3189036b06b7d47acf75d044["服务器id"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["accountid"] = $id; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serviceid"] = $id; $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"] = $OSWAP_82bdfee4b92084c05ac3b384dd79c752; $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] = $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name; $OSWAP_6c5cee550b682ff7d674773f07a17f33["money"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["开通付费"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] = $OSWAP_c9d58e6756676f02d347c255bcb6b03b; $OSWAP_6c5cee550b682ff7d674773f07a17f33["packageid"] = $OSWAP_c883aa8abd38ad1f44fb0363ec00999b; $OSWAP_6c5cee550b682ff7d674773f07a17f33["pid"] = $OSWAP_c883aa8abd38ad1f44fb0363ec00999b; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"] = $OSWAP_b7da14f6d30a57d6556466c8bacc5350; $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query("产品","*",array("id" => $OSWAP_c883aa8abd38ad1f44fb0363ec00999b)); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array($OSWAP_2e29d37ed05a8087327b406a5df9d569); $OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["类型"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["producttype"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["类型"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["面板类型"]; if (!isValidforPath( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] )) { swap_main_error_module("服务器模块错误","无效的服务器模块名称"); } $OSWAP_e2731fa8519fac7a80d3dea79280b9a1er = 1; while ($OSWAP_e2731fa8519fac7a80d3dea79280b9a1er <= 30) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption" . $OSWAP_e2731fa8519fac7a80d3dea79280b9a1er] = $OSWAP_e77f888b3189036b06b7d47acf75d044["配置选项" . $OSWAP_e2731fa8519fac7a80d3dea79280b9a1er]; $OSWAP_e2731fa8519fac7a80d3dea79280b9a1er++; } $OSWAP_4cd6c668571d099667e9b8d0e5c10e7d = array(); $OSWAP_2e29d37ed05a8087327b406a5df9d569 = full_query( "SELECT 产品自定义项.名称,产品自定义项内容.内容 FROM 产品自定义项,产品自定义项内容 WHERE 产品自定义项.id=产品自定义项内容.项id AND 产品自定义项内容.服务id=" . (int)$id . " AND 产品自定义项.服务id=" . (int)$OSWAP_c883aa8abd38ad1f44fb0363ec00999b ); while ($OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 )) { $OSWAP_585882f785e16aeb0c50ffb662673a03 = $OSWAP_e77f888b3189036b06b7d47acf75d044[0]; $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7 = $OSWAP_e77f888b3189036b06b7d47acf75d044[1]; if (strpos( $OSWAP_585882f785e16aeb0c50ffb662673a03, "|" )) { $OSWAP_585882f785e16aeb0c50ffb662673a03 = explode( "|", $OSWAP_585882f785e16aeb0c50ffb662673a03 ); $OSWAP_585882f785e16aeb0c50ffb662673a03 = trim( $OSWAP_585882f785e16aeb0c50ffb662673a03[0] ); } if (strpos( $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7, "|" )) { $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7 = explode( "|", $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7 ); $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7 = trim( $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7[0] ); } $OSWAP_4cd6c668571d099667e9b8d0e5c10e7d[$OSWAP_585882f785e16aeb0c50ffb662673a03] = $OSWAP_3629e6e6d1a1df4bd44327a6f93670f7; } $OSWAP_6c5cee550b682ff7d674773f07a17f33["customfields"] = $OSWAP_4cd6c668571d099667e9b8d0e5c10e7d; $configoptions = array(); $OSWAP_2e29d37ed05a8087327b406a5df9d569 = full_query( "SELECT 产品配置选项.选项名称,产品配置选项.选项类型,产品配置选项名称.选项名称,主机配置选项.数量 FROM 产品配置选项,产品配置选项名称,主机配置选项,产品配置连接 WHERE 主机配置选项.配置id=产品配置选项.id AND 主机配置选项.选项id=产品配置选项名称.id AND 主机配置选项.服务id=" . (int)$id . " AND 产品配置连接.组id=产品配置选项.组id AND 产品配置连接.产品id=" . (int)$OSWAP_c883aa8abd38ad1f44fb0363ec00999b ); while ($OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 )) { $configoptionname = $OSWAP_e77f888b3189036b06b7d47acf75d044[0]; $configoptiontype = $OSWAP_e77f888b3189036b06b7d47acf75d044[1]; $configoptionvalue = $OSWAP_e77f888b3189036b06b7d47acf75d044[2]; $configoptionqty = $OSWAP_e77f888b3189036b06b7d47acf75d044[3]; if (strpos( $configoptionname, "|" )) { $configoptionname = explode( "|", $configoptionname ); $configoptionname = trim( $configoptionname[0] ); } if (strpos( $configoptionvalue, "|" )) { $configoptionvalue = explode( "|", $configoptionvalue ); $configoptionvalue = trim( $configoptionvalue[0] ); } if (( $configoptiontype == "3" || $configoptiontype == "4" )) { $configoptionvalue = $configoptionqty; } $configoptions[$configoptionname] = $configoptionvalue; } $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoptions"] = $configoptions; $OSWAP_52717a291e4ca71b2977afc054b06ea5=array(); $OSWAP_2e29d37ed05a8087327b406a5df9d569 = full_query( "SELECT 名字,内容 FROM 主机自定义配置选项 WHERE 服务id=" . (int)$id); while ($OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 )) { $OSWAP_52717a291e4ca71b2977afc054b06ea5[$OSWAP_e77f888b3189036b06b7d47acf75d044[0]]=$OSWAP_e77f888b3189036b06b7d47acf75d044[1]; } $OSWAP_6c5cee550b682ff7d674773f07a17f33["buyoptions"] = $OSWAP_52717a291e4ca71b2977afc054b06ea5; $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails = getClientsDetails( $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id ); $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails["fullstate"] = $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails["state"]; $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails["state"] = convertStateToCode( $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails["state"], $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails["country"] ); $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails = foreignChrReplace( $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails ); $OSWAP_6c5cee550b682ff7d674773f07a17f33["clientsdetails"] = $OSWAP_a0b4b1ced30c2d6ba1aa523e737ac5f6sdetails; if ($OSWAP_b7da14f6d30a57d6556466c8bacc5350) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务器表", "", array( "id" => $OSWAP_b7da14f6d30a57d6556466c8bacc5350 ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); if($OSWAP_e77f888b3189036b06b7d47acf75d044['禁用']=="1") return '服务器为禁用状态'; $OSWAP_6c5cee550b682ff7d674773f07a17f33["server"] = true; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["ip"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["主机名"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverport"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["端口"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] = html_entity_decode( $OSWAP_e77f888b3189036b06b7d47acf75d044["用户名"] ); $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"] = html_entity_decode( decrypt( $OSWAP_e77f888b3189036b06b7d47acf75d044["密码"] ) ); $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"] = html_entity_decode( $OSWAP_e77f888b3189036b06b7d47acf75d044["哈希密码"] ); $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["使用SSL"]; } else { $OSWAP_6c5cee550b682ff7d674773f07a17f33["server"] = false; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"] = ""; } if (!function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ConfigOptions" )) { $OSWAP_2b274b1611c149c99f706cb822116d2epath = SWAP_LIB . "servers/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . ".php"; if (file_exists( $OSWAP_2b274b1611c149c99f706cb822116d2epath )) { requirer($OSWAP_2b274b1611c149c99f706cb822116d2epath); } else { swap_main_error_module("不存在服务器模块",$OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"]); } } $GLOBALS["moduleparams"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33; if(function_exists("set_time_limit")){ if(!set_time_limit(1800)) @ini_set("max_execution_time", "1800"); }else @ini_set("max_execution_time", "1800"); if(function_exists("ignore_user_abort")) ignore_user_abort(true); return $OSWAP_6c5cee550b682ff7d674773f07a17f33; } function ServerCreateAccount($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "create"; if (!$OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] = createServerUsername( $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"] ); update_query( "服务", array( "用户名" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); } if (!$OSWAP_6c5cee550b682ff7d674773f07a17f33["password"]) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] = createServerPassword(); update_query( "服务", array( "密码" => encrypt( $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] ) ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); } if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_CreateAccount" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_CreateAccount", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { update_query( "服务", array( "状态" => "激活" ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); do_swap_plug('开通主机成功',$OSWAP_80aae56c94a39be4baef592a143d390c_id,$OSWAP_6c5cee550b682ff7d674773f07a17f33); return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { swap_main_error_module($OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"]."是损坏的模块","开通功能损坏"); } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerSuspendAccount($OSWAP_80aae56c94a39be4baef592a143d390c_id, $OSWAP_ed7ffb4e9243dfd98b744caa2a4facbe = "") { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "suspend"; $OSWAP_6c5cee550b682ff7d674773f07a17f33["suspendreason"] = ($OSWAP_ed7ffb4e9243dfd98b744caa2a4facbe ? $OSWAP_ed7ffb4e9243dfd98b744caa2a4facbe : "到期没有付款进行续期"); if ( function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_SuspendAccount" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_SuspendAccount", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { update_query( "服务", array( "状态" => "暂停", "暂停原因" => $OSWAP_ed7ffb4e9243dfd98b744caa2a4facbe ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); do_swap_plug('暂停主机成功',$OSWAP_80aae56c94a39be4baef592a143d390c_id,$OSWAP_6c5cee550b682ff7d674773f07a17f33); return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerUnsuspendAccount($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "unsuspend"; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_UnsuspendAccount" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_UnsuspendAccount", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { update_query( "服务", array( "状态" => "激活", "暂停原因" => "" ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); do_swap_plug('恢复主机成功',$OSWAP_80aae56c94a39be4baef592a143d390c_id,$OSWAP_6c5cee550b682ff7d674773f07a17f33); return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerTerminateAccount($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "terminate"; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_TerminateAccount" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_TerminateAccount", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { update_query( "服务", array( "状态" => "停止" ), array( "id" => $OSWAP_80aae56c94a39be4baef592a143d390c_id ) ); delete_query("主机自定义配置选项",array("服务id"=>$OSWAP_80aae56c94a39be4baef592a143d390c_id)); do_swap_plug('停止主机成功',$OSWAP_80aae56c94a39be4baef592a143d390c_id,$OSWAP_6c5cee550b682ff7d674773f07a17f33); return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { swap_main_error_module($OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"]."是损坏的模块","终止功能损坏"); } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function _generate_iv() { global $OSWAP_21f92af0d030ed356dd44aaca21c76c9; srand( (double)microtime() * 1000000 ); $iv = md5( strrev( substr( $OSWAP_21f92af0d030ed356dd44aaca21c76c9, 13 ) ) . substr( $OSWAP_21f92af0d030ed356dd44aaca21c76c9, 0, 13 ) ); $iv .= rand( 0, getrandmax() ); $iv .= serialize( array( "key" => md5( md5( $OSWAP_21f92af0d030ed356dd44aaca21c76c9 ) ) . md5( $OSWAP_21f92af0d030ed356dd44aaca21c76c9 ) ) ); return _hash( $iv ); } function _hash($OSWAP_c9d6da5fe63048d3e5234df142aa6a2f) { if (function_exists( "sha1" )) { $OSWAP_c500bb0b575e73972ff395ededbd8eb4 = sha1( $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f ); } else { $OSWAP_c500bb0b575e73972ff395ededbd8eb4 = md5( $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f ); } $OSWAP_db99cf1bb1484afbc2d9e1f1c3ac4bb9 = ""; $c = 5; while ($c < strlen( $OSWAP_c500bb0b575e73972ff395ededbd8eb4 )) { $OSWAP_db99cf1bb1484afbc2d9e1f1c3ac4bb9 .= chr( hexdec( $OSWAP_c500bb0b575e73972ff395ededbd8eb4[$c] . $OSWAP_c500bb0b575e73972ff395ededbd8eb4[$c + 1] ) ); $c += 7; } return $OSWAP_db99cf1bb1484afbc2d9e1f1c3ac4bb9; } function ServerRenew($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "renew"; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_Renew" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_Renew", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } return "notsupported"; } function ServerChangePassword($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "changepw"; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ChangePassword" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ChangePassword", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerLoginLink($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_LoginLink" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_LoginLink", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } function ServerChangePackage($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; $OSWAP_6c5cee550b682ff7d674773f07a17f33["action"] = "upgrade"; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ChangePackage" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ChangePackage", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569 == "成功") { return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerCustomFunction($OSWAP_80aae56c94a39be4baef592a143d390c_id, $OSWAP_80aae56c94a39be4baef592a143d390c_name) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_" . $OSWAP_80aae56c94a39be4baef592a143d390c_name )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_" . $OSWAP_80aae56c94a39be4baef592a143d390c_name, $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerFunction($OSWAP_6c5cee550b682ff7d674773f07a17f33, $OSWAP_80aae56c94a39be4baef592a143d390c_name) { if (file_exists( SWAP_LIB . "servers/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . ".php" )) { requirer(SWAP_LIB . "servers/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . ".php"); }else{ $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_" . $OSWAP_80aae56c94a39be4baef592a143d390c_name )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_" . $OSWAP_80aae56c94a39be4baef592a143d390c_name, $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "服务器模块不支持的功能"; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerClientArea($OSWAP_80aae56c94a39be4baef592a143d390c_id) { $OSWAP_6c5cee550b682ff7d674773f07a17f33 = ModuleBuildParams( $OSWAP_80aae56c94a39be4baef592a143d390c_id ); if(is_string($OSWAP_6c5cee550b682ff7d674773f07a17f33)) return $OSWAP_6c5cee550b682ff7d674773f07a17f33; if (function_exists( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ClientArea" )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = call_user_func( $OSWAP_6c5cee550b682ff7d674773f07a17f33["moduletype"] . "_ClientArea", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = ""; } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } function ServerUsageUpdate() { $OSWAP_2e29d37ed05a8087327b406a5df9d5692 = select_query( "服务器表", "", array( "禁用" => "0" ), "名称", "ASC" ); while ($OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d5692 )) { $OSWAP_b7da14f6d30a57d6556466c8bacc5350type = $OSWAP_e77f888b3189036b06b7d47acf75d044["控制面板"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["id"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["ip"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["主机名"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["用户名"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"] = decrypt($OSWAP_e77f888b3189036b06b7d47acf75d044["密码"]); $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["哈希密码"]; $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["使用SSL"]; if (!function_exists( $OSWAP_b7da14f6d30a57d6556466c8bacc5350type . "_ConfigOptions" )) { if (!isValidforPath( $OSWAP_b7da14f6d30a57d6556466c8bacc5350type )) { continue; } requirer(SWAP_LIB . "servers/" . $OSWAP_b7da14f6d30a57d6556466c8bacc5350type . "/" . $OSWAP_b7da14f6d30a57d6556466c8bacc5350type . ".php"); } if (function_exists( $OSWAP_b7da14f6d30a57d6556466c8bacc5350type . "_UsageUpdate" )) { $OSWAP_9cf4d9bd2924859cdbf870961f1dd6ef = call_user_func( $OSWAP_b7da14f6d30a57d6556466c8bacc5350type . "_UsageUpdate", $OSWAP_6c5cee550b682ff7d674773f07a17f33 ); } } } function createServerUsername($OSWAP_82bdfee4b92084c05ac3b384dd79c752) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "系统配置", "随机主机用户名"); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_9206f78a159bf6d516a7d55297c5638d = $OSWAP_e77f888b3189036b06b7d47acf75d044["随机主机用户名"]; if (!$OSWAP_82bdfee4b92084c05ac3b384dd79c752) { return ""; } if (!$OSWAP_9206f78a159bf6d516a7d55297c5638d) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = strtolower( $OSWAP_82bdfee4b92084c05ac3b384dd79c752 ); $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name = preg_replace( "/[^a-z]/", "", $OSWAP_82bdfee4b92084c05ac3b384dd79c752 ); $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name = substr( $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name, 0, 8 ); $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务", "COUNT(*)", array( "用户名" => $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name_exists = $OSWAP_e77f888b3189036b06b7d47acf75d044[0]; $OSWAP_3ef69bcb0c8051583e74d9650fbece41 = 10; while (0 < $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name_exists) { $OSWAP_3ef69bcb0c8051583e74d9650fbece41++; $OSWAP_a63f49b7070d8ef9ad3195b9af4feb5c = 8 - strlen( $OSWAP_3ef69bcb0c8051583e74d9650fbece41 ); $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name = substr( $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name, 0, $OSWAP_a63f49b7070d8ef9ad3195b9af4feb5c ) . $OSWAP_3ef69bcb0c8051583e74d9650fbece41; $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务", "COUNT(*)", array( "用户名" => $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name_exists = $OSWAP_e77f888b3189036b06b7d47acf75d044[0]; } } else { $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name='s'.substr(time(), -7); } return $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name; } function createServerPassword() { $OSWAP_c9d58e6756676f02d347c255bcb6b03b = ''; $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4 =2; $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae = 'abcdefghijklmnopqrstuvwxyz'; for ( $i = 0; $i < $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4; $i++ ){ $OSWAP_c9d58e6756676f02d347c255bcb6b03b .= $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae[ mt_rand(0, strlen($OSWAP_dbf9994798dd7a6d1a9212ceb50740ae) - 1) ]; } $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4 =2; $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'; for ( $i = 0; $i < $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4; $i++ ){ $OSWAP_c9d58e6756676f02d347c255bcb6b03b .= $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae[ mt_rand(0, strlen($OSWAP_dbf9994798dd7a6d1a9212ceb50740ae) - 1) ]; } $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4 =2; $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae = '0123456789'; for ( $i = 0; $i < $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4; $i++ ){ $OSWAP_c9d58e6756676f02d347c255bcb6b03b .= $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae[ mt_rand(0, strlen($OSWAP_dbf9994798dd7a6d1a9212ceb50740ae) - 1) ]; } $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4 =2; $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae = 'abcdefghijklmnopqrstuvwxyz'; for ( $i = 0; $i < $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4; $i++ ){ $OSWAP_c9d58e6756676f02d347c255bcb6b03b .= $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae[ mt_rand(0, strlen($OSWAP_dbf9994798dd7a6d1a9212ceb50740ae) - 1) ]; } $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4 =2; $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'; for ( $i = 0; $i < $OSWAP_dca0324a5dbf6d8dc00e7c793bc9aae4; $i++ ){ $OSWAP_c9d58e6756676f02d347c255bcb6b03b .= $OSWAP_dbf9994798dd7a6d1a9212ceb50740ae[ mt_rand(0, strlen($OSWAP_dbf9994798dd7a6d1a9212ceb50740ae) - 1) ]; } return $OSWAP_c9d58e6756676f02d347c255bcb6b03b; } function foreignChrReplace($OSWAP_66189eb7098b09b18bfaa8454c4e10d2) { $OSWAP_7825b76ad03a1558347dadb0144db12b = array(); if (is_array( $OSWAP_66189eb7098b09b18bfaa8454c4e10d2 )) { foreach ($OSWAP_66189eb7098b09b18bfaa8454c4e10d2 as $OSWAP_6291cc79354613208317e7b10b238055 => $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a) { if (is_array( $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a )) { $OSWAP_7825b76ad03a1558347dadb0144db12b[$OSWAP_6291cc79354613208317e7b10b238055] = foreignChrReplace( $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a ); continue; } $OSWAP_7825b76ad03a1558347dadb0144db12b[$OSWAP_6291cc79354613208317e7b10b238055] = foreignChrReplace2( $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a ); } } else { $OSWAP_7825b76ad03a1558347dadb0144db12b = foreignChrReplace2( $OSWAP_66189eb7098b09b18bfaa8454c4e10d2 ); } return $OSWAP_7825b76ad03a1558347dadb0144db12b; } function foreignChrReplace2($OSWAP_c9d6da5fe63048d3e5234df142aa6a2f) { $OSWAP_9beab974d29ca79544e93f5bdb0f4b68 = "/&([A-Za-z]{1,2})(grave|acute|circ|cedil|uml|lig|tilde|ring|slash|zlig|elig|quest|caron);/"; $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f = htmlentities( $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f, ENT_NOQUOTES); $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f = preg_replace( $OSWAP_9beab974d29ca79544e93f5bdb0f4b68, "", $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f ); $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f = html_entity_decode( $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f, ENT_NOQUOTES); if (( ( function_exists( "mb_internal_encoding" ) && function_exists( "mb_regex_encoding" ) ) && function_exists( "mb_ereg_replace" ) )) { mb_internal_encoding( "UTF-8" ); mb_regex_encoding( "UTF-8" ); $OSWAP_8e9db28bf2a1e8f6e70f81d420b2d762 = array( "g" => "g", "ü" => "u", "s" => "s", "ö" => "o", "i" => "i", "ç" => "c", "G" => "G", "Ü" => "U", "S" => "S", "Ö" => "O", "I" => "I", "Ç" => "C" ); foreach ($OSWAP_8e9db28bf2a1e8f6e70f81d420b2d762 as $i => $u) { $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f = mb_ereg_replace( $i, $u, $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f ); } } return $OSWAP_c9d6da5fe63048d3e5234df142aa6a2f; } function convertStateToCode($OSWAP_a4876b3564dfe008c09d840119d9726b, &$OSWAP_d23519cda7160577a488cef431673b7a) { $sc = ""; $OSWAP_967aeec675f43231d64115bab3ae70d5 = strtolower( $OSWAP_a4876b3564dfe008c09d840119d9726b ); $OSWAP_d23519cda7160577a488cef431673b7a = strtoupper( $OSWAP_d23519cda7160577a488cef431673b7a ); if ($OSWAP_d23519cda7160577a488cef431673b7a == "US") { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "alabama") { $sc = "AL"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "alaska") { $sc = "AK"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "arizona") { $sc = "AZ"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "arkansas") { $sc = "AR"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "california") { $sc = "CA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "colorado") { $sc = "CO"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "connecticut") { $sc = "CT"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "delaware") { $sc = "DE"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "florida") { $sc = "FL"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "georgia") { $sc = "GA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "hawaii") { $sc = "HI"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "idaho") { $sc = "ID"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "illinois") { $sc = "IL"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "indiana") { $sc = "IN"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "iowa") { $sc = "IA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "kansas") { $sc = "KS"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "kentucky") { $sc = "KY"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "louisiana") { $sc = "LA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "maine") { $sc = "ME"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "maryland") { $sc = "MD"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "massachusetts") { $sc = "MA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "michigan") { $sc = "MI"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "minnesota") { $sc = "MN"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "mississippi") { $sc = "MS"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "missouri") { $sc = "MO"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "montana") { $sc = "MT"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "nebraska") { $sc = "NE"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "nevada") { $sc = "NV"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "new hampshire") { $sc = "NH"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "new jersey") { $sc = "NJ"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "new mexico") { $sc = "NM"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "new york") { $sc = "NY"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "north carolina") { $sc = "NC"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "north dakota") { $sc = "ND"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "ohio") { $sc = "OH"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "oklahoma") { $sc = "OK"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "oregon") { $sc = "OR"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "pennsylvania") { $sc = "PA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "rhode island") { $sc = "RI"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "south carolina") { $sc = "SC"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "south dakota") { $sc = "SD"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "tennessee") { $sc = "TN"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "texas") { $sc = "TX"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "utah") { $sc = "UT"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "vermont") { $sc = "VT"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "virginia") { $sc = "VA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "washington") { $sc = "WA"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "west virginia") { $sc = "WV"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "wisconsin") { $sc = "WI"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "wyoming") { $sc = "WY"; } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } } else { if ($OSWAP_d23519cda7160577a488cef431673b7a == "CA") { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "alberta") { $sc = "AB"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "british columbia") { $sc = "BC"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "manitoba") { $sc = "MB"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "new brunswick") { $sc = "NB"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "newfoundland") { $sc = "NL"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "northwest territories") { $sc = "NT"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "nova scotia") { $sc = "NS"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "nunavut") { $sc = "NU"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "ontario") { $sc = "ON"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "prince edward island") { $sc = "PE"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "quebec") { $sc = "QC"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "saskatchewan") { $sc = "SK"; } else { if ($OSWAP_967aeec675f43231d64115bab3ae70d5 == "yukon territory") { $sc = "YT"; } } } } } } } } } } } } } } } if (!$sc) { $sc = $OSWAP_a4876b3564dfe008c09d840119d9726b; } return $sc; } function cpanel_ConfigOptions() { $configarray = array( "WHM包名" => array( "Type" => "text", "Size" => "25" ), "最多FTP帐号" => array( "Type" => "text", "Size" => "5" ), "空间限制" => array( "Type" => "text", "Size" => "5", "Description" => "MB" ), "最多Email帐号" => array( "Type" => "text", "Size" => "5" ), "流量限制" => array( "Type" => "text", "Size" => "5", "Description" => "MB" ), "专用IP" => array( "Type" => "yesno" ), "Shell权限" => array( "Type" => "yesno", "Description" => "给予Shell权限" ), "最多SQL数据库" => array( "Type" => "text", "Size" => "5" ), "CGI权限" => array( "Type" => "yesno", "Description" => "给予CGI权限" ), "最多子域名" => array( "Type" => "text", "Size" => "5" ), "Frontpage扩展" => array( "Type" => "yesno", "Description" => "给予Frontpage扩展" ), "最多域名停放" => array( "Type" => "text", "Size" => "5" ), "cPanel主题" => array( "Type" => "text", "Size" => "15" ), "最多附加域名" => array( "Type" => "text", "Size" => "5" ), "经销商用户数量限制" => array( "Type" => "text", "Size" => "5", "Description" => "输入经销商可以销售的最大数量账户" ), "经销商权限限制" => array( "Type" => "yesno", "Description" => "选中来限制经销商的资源使用" ), "经销商空间限制" => array( "Type" => "text", "Size" => "7", "Description" => "MB" ), "经销商流量限制" => array( "Type" => "text", "Size" => "7", "Description" => "MB" ), "允许空间超买" => array( "Type" => "yesno", "Description" => "MB" ), "允许流量超买" => array( "Type" => "yesno", "Description" => "MB" ), "经销商ACL列表" => array( "Type" => "text", "Size" => "20" ), "添加包名前缀" => array( "Type" => "yesno", "Description" => "在包名前面加上 用户名_包名 如果是购买的分销主机基本都是这样的格式" ), "配置域名服务器" => array( "Type" => "yesno", "Description" => "安装 ns1/ns2 NS服务器" ), "经销商所有权" => array( "Type" => "yesno", "Description" => "设置经销商有自己的账户" ) ); return $configarray; } function cpanel_ClientArea($OSWAP_6c5cee550b682ff7d674773f07a17f33) { $langfile=SWAP_LIB.'servers'.SWAP_DIR_END.'cpanel'.SWAP_DIR_END.'lang'.SWAP_DIR_END.$GLOBALS['swap_mac']['config']['language'].'.php'; if(file_exists($langfile)) require $langfile; else{ if(file_exists(SWAP_LIB.'servers'.SWAP_DIR_END.'cpanel'.SWAP_DIR_END.'lang'.SWAP_DIR_END.'Chinese.php')) require SWAP_LIB.'servers'.SWAP_DIR_END.'cpanel'.SWAP_DIR_END.'lang'.SWAP_DIR_END.'Chinese.php'; else swap_main_error_module('找不到服务器模块语言包','cpanel'); } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"]) { $OSWAP_b7597d4500d1c2b62193d505150fd285 = "https"; $OSWAP_07e5d1ddb668713ec99497bea967ec03port = "2083"; $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2087"; $OSWAP_c19deec73c0d60221b4a2a21111076e5 = "2096"; } else { $OSWAP_b7597d4500d1c2b62193d505150fd285 = "http"; $OSWAP_07e5d1ddb668713ec99497bea967ec03port = "2082"; $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2086"; $OSWAP_c19deec73c0d60221b4a2a21111076e5 = "2095"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_9ed21c0d2f12875f606b2694b8646816 = ""; if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "虚拟主机") { $OSWAP_9ed21c0d2f12875f606b2694b8646816 = array( '<a href="javascript:document.cpanellogin.submit();" target="_blank">'.$lang['直接登录(自定义密码无效)'].'</a>', "<a href=\"".$OSWAP_b7597d4500d1c2b62193d505150fd285."://".$OSWAP_82bdfee4b92084c05ac3b384dd79c752.":".$OSWAP_c19deec73c0d60221b4a2a21111076e5."/\" target=\"_blank\">".$lang['WEBMAIL登陆']."</a>", "<form name=\"cpanellogin\" action=\"" . $OSWAP_b7597d4500d1c2b62193d505150fd285 . "://" . $OSWAP_82bdfee4b92084c05ac3b384dd79c752 . ":" . $OSWAP_07e5d1ddb668713ec99497bea967ec03port . "/login/\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"user\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "\" /><input type=\"hidden\" name=\"pass\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] . "\" /></form>", '<a href="http://'.$OSWAP_82bdfee4b92084c05ac3b384dd79c752.':2082/" target="_blank">'.$lang['管理地址(http)'].'</a>', '<a href="https://'.$OSWAP_82bdfee4b92084c05ac3b384dd79c752.':2083/" target="_blank">'.$lang['管理地址(https)'].'</a>' ); } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { $OSWAP_9ed21c0d2f12875f606b2694b8646816 = array( '<a href="javascript:document.cpanellogin.submit();" target="_blank">'.$lang['直接登录(自定义密码无效)'].'</a>', "<form name=\"cpanellogin\" action=\"" . $OSWAP_b7597d4500d1c2b62193d505150fd285 . "://" . $OSWAP_82bdfee4b92084c05ac3b384dd79c752 . ":" . $OSWAP_7f63ad337fb156ab0fa926202948b0b2 . "/login/\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"user\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "\" /><input type=\"hidden\" name=\"pass\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] . "\" /></form>", '<a href="http://'.$OSWAP_82bdfee4b92084c05ac3b384dd79c752.':2086/" target="_blank">'.$lang['管理地址(http)'].'</a>', '<a href="https://'.$OSWAP_82bdfee4b92084c05ac3b384dd79c752.':2087/" target="_blank">'.$lang['管理地址(https)'].'</a>' ); } return $OSWAP_9ed21c0d2f12875f606b2694b8646816; } function cpanel_AdminLink($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"]) { $OSWAP_b7597d4500d1c2b62193d505150fd285 = "https"; $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2087"; } else { $OSWAP_b7597d4500d1c2b62193d505150fd285 = "http"; $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2086"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_9ed21c0d2f12875f606b2694b8646816 = "<form action=\"" . $OSWAP_b7597d4500d1c2b62193d505150fd285 . "://" . $OSWAP_82bdfee4b92084c05ac3b384dd79c752 . ":" . $OSWAP_7f63ad337fb156ab0fa926202948b0b2 . "/login/\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"user\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] . "\" /><input type=\"hidden\" name=\"pass\" value=\"" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"] . "\" /><input type=\"submit\" value=\"WHM\" /></form>"; return $OSWAP_9ed21c0d2f12875f606b2694b8646816; } function cpanel_costrrpl($OSWAP_63e29f0f36f8e0e4b3ad59487599f02a) { $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = str_replace( "MB", "", $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a ); $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = str_replace( "Accounts", "", $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a ); $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = trim( $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a ); if ($OSWAP_63e29f0f36f8e0e4b3ad59487599f02a == "Yes") { $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = "on"; } else { if ($OSWAP_63e29f0f36f8e0e4b3ad59487599f02a == "No") { $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = ""; } else { if ($OSWAP_63e29f0f36f8e0e4b3ad59487599f02a == "Unlimited") { $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a = "unlimited"; } } } return $OSWAP_63e29f0f36f8e0e4b3ad59487599f02a; } function cpanel_CreateAccount($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption6"]) { $OSWAP_feca98aae73a7e04beef319618026dfaicatedip = "y"; } else { $OSWAP_feca98aae73a7e04beef319618026dfaicatedip = "n"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption9"]) { $OSWAP_3b01ef3fb2a0e9e8f4cd63f57ab840d0 = "y"; } else { $OSWAP_3b01ef3fb2a0e9e8f4cd63f57ab840d0 = "n"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption7"]) { $OSWAP_89d6b9b3d2e2fabb793d98930732b285 = "y"; } else { $OSWAP_89d6b9b3d2e2fabb793d98930732b285 = "n"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption11"]) { $OSWAP_5e210d05fcc8e0aea676ed28a86a3494 = "y"; } else { $OSWAP_5e210d05fcc8e0aea676ed28a86a3494 = "n"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption22"]) { $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] . "_"; } else { $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 = ""; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_39acd516275569f78d4b51d4c5d2244cfields = array(); $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["username"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["password"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["domain"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["plan"] = $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption1"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["savepkg"] = 0; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["featurelist"] = "default"; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["quota"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption3"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["bwlimit"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption5"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["ip"] = $OSWAP_feca98aae73a7e04beef319618026dfaicatedip; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["cgi"] = $OSWAP_3b01ef3fb2a0e9e8f4cd63f57ab840d0; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["frontpage"] = $OSWAP_5e210d05fcc8e0aea676ed28a86a3494; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["hasshell"] = $OSWAP_89d6b9b3d2e2fabb793d98930732b285; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["contactemail"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["clientsdetails"]["email"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["cpmod"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption13"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxftp"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption2"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxsql"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption8"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxpop"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption4"]; if ($OSWAP_3300eb3b5b1930eeceac2d5d3f419d2a) { $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxlst"] = $OSWAP_3300eb3b5b1930eeceac2d5d3f419d2a; } $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxsub"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption10"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxpark"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption12"]; $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["maxaddon"] = $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption14"]; if ($languageco) { $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["language"] = $languageco; } $OSWAP_39acd516275569f78d4b51d4c5d2244cfields["reseller"] = 0; $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/createacct?"; foreach ($OSWAP_39acd516275569f78d4b51d4c5d2244cfields as $k => $v) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "" . $k . "=" . urlencode( $v ) . "&"; } $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["CREATEACCT"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["CREATEACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } if (preg_match("/^The domain (.*) already exists in the Apache configuration.$/",$OSWAP_0ccc3e14ef41636d4776a93725351e09)) $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "存在的域名"; return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } if ($OSWAP_feca98aae73a7e04beef319618026dfaicatedip == "y") { $OSWAP_2cf1b90afc6b200d75f0b6e6629437d8accountip = $OSWAP_e6c01a3554937029a7821c3bda90c76b["CREATEACCT"]["RESULT"]["OPTIONS"]["IP"]; update_query( "服务", array( "专用ip" => $OSWAP_2cf1b90afc6b200d75f0b6e6629437d8accountip ), array( "id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serviceid"] ) ); } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { $OSWAP_f54554517844989d714cbf3961f64b56 = ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption24"] ? 1 : 0); $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setupreseller?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&makeowner=" . $OSWAP_f54554517844989d714cbf3961f64b56; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETUPRESELLER"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETUPRESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setresellerlimits?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption16"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_resource_limits=1&diskspace_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption17"] ) . "&bandwidth_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption18"] ); if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption19"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_overselling_diskspace=1"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption20"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_overselling_bandwidth=1"; } } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption15"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_account_limit=1&account_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption15"] ); } $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERLIMITS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERLIMITS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setacls?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&acllist=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption21"] ); $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption23"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setresellernameservers?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&nameservers=ns1." . $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"] . ",ns2." . $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERNAMESERVERS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERNAMESERVERS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } } return "成功"; } function cpanel_SuspendAccount($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if (!$OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/scripts/suspendreseller?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&resalso=1"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request, true ); if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "Curl Error" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = $OSWAP_e6c01a3554937029a7821c3bda90c76b; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "登录失败"; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "account has been suspended" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "成功"; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "Account Already Suspended" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "帐户已经暂停"; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "You do not have permission to suspend that account" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "您没有权限暂停帐户"; } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "出现未知错误"; } } } } } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/suspendacct?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&reason=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["suspendreason"] ); $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SUSPENDACCT"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SUSPENDACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } return "成功"; } function cpanel_UnsuspendAccount($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if (!$OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/scripts/suspendreseller?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&resalso=1&un=1"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request, true ); if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "Curl Error" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = $OSWAP_e6c01a3554937029a7821c3bda90c76b; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "登录失败"; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "does not exist" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "帐户不存在"; } else { if (strpos( $OSWAP_e6c01a3554937029a7821c3bda90c76b, "Complete!" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "成功"; } else { $OSWAP_2e29d37ed05a8087327b406a5df9d569 = "出现未知错误"; } } } } return $OSWAP_2e29d37ed05a8087327b406a5df9d569; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/unsuspendacct?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["UNSUSPENDACCT"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["UNSUSPENDACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } return "成功"; } function cpanel_TerminateAccount($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if (!$OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/terminatereseller?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&terminatereseller=1&verify=I%20understand%20this%20will%20irrevocably%20remove%20all%20the%20accounts%20owned%20by%20the%20reseller%20" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["TERMINATERESELLER"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["TERMINATERESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } else { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/removeacct?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["REMOVEACCT"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["REMOVEACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } return "成功"; } function cpanel_ChangePassword($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/passwd?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&pass=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["password"] ); $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } $temps=array_keys($OSWAP_e6c01a3554937029a7821c3bda90c76b["PASSWD"]); $temp=$temps[0]; if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["PASSWD"][$temp]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["PASSWD"][$temp]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } return "成功"; } function cpanel_ChangePackage($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption22"]) { $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"] . "_"; } else { $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 = ""; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/listresellers"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request, true ); $OSWAP_f8993b018238eb8153de9efaa5dc20b3 = xml_parser_create(); xml_parser_set_option( $OSWAP_f8993b018238eb8153de9efaa5dc20b3, XML_OPTION_CASE_FOLDING, 0 ); xml_parser_set_option( $OSWAP_f8993b018238eb8153de9efaa5dc20b3, XML_OPTION_SKIP_WHITE, 1 ); xml_parse_into_struct( $OSWAP_f8993b018238eb8153de9efaa5dc20b3, $OSWAP_e6c01a3554937029a7821c3bda90c76b, $OSWAP_39142f39cec5dbdcd079786493158f62_values ); xml_parser_free( $OSWAP_f8993b018238eb8153de9efaa5dc20b3 ); $OSWAP_8896eb9632a4850e4baf3069943b4123 = array(); foreach ($OSWAP_39142f39cec5dbdcd079786493158f62_values as $OSWAP_63e29f0f36f8e0e4b3ad59487599f02as) { if ($OSWAP_63e29f0f36f8e0e4b3ad59487599f02as["tag"] == "reseller") { $OSWAP_8896eb9632a4850e4baf3069943b4123[] = $OSWAP_63e29f0f36f8e0e4b3ad59487599f02as["value"]; continue; } } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["type"] == "reselleraccount") { if (!in_array( $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"], $OSWAP_8896eb9632a4850e4baf3069943b4123 )) { $OSWAP_f54554517844989d714cbf3961f64b56 = ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption24"] ? 1 : 0); $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setupreseller?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&makeowner=" . $OSWAP_f54554517844989d714cbf3961f64b56; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETUPRESELLER"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETUPRESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption21"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setacls?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&acllist=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption21"] ); $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setresellerlimits?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption16"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_resource_limits=1&diskspace_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption17"] ) . "&bandwidth_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption18"] ); if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption19"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_overselling_diskspace=1"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption20"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_overselling_bandwidth=1"; } } else { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_resource_limits=0"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption15"]) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption15"] == "unlimited") { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_account_limit=1&account_limit="; } else { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_account_limit=1&account_limit=" . urlencode( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption15"] ); } } else { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "&enable_account_limit=0&account_limit="; } $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERLIMITS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETRESELLERLIMITS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption21"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setacls?reseller=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&acllist=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption21"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } } else { if (in_array( $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"], $OSWAP_8896eb9632a4850e4baf3069943b4123 )) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/unsetupreseller?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption1"] != "Custom") { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/changepackage?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&pkg=" . urlencode( $OSWAP_e8f9c743d01cf9b538554a0bc503b0e4 . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption1"] ); $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (!is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b )) { return $OSWAP_e6c01a3554937029a7821c3bda90c76b; } if (!$OSWAP_e6c01a3554937029a7821c3bda90c76b["CHANGEPACKAGE"]["RESULT"]["STATUS"]) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["CHANGEPACKAGE"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_0ccc3e14ef41636d4776a93725351e09) { $OSWAP_0ccc3e14ef41636d4776a93725351e09 = "出现未知错误"; } return $OSWAP_0ccc3e14ef41636d4776a93725351e09; } } } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption3"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption3"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption3"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/scripts/editquota?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&quota=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption3"] . ""; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request, true ); } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption5"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption5"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption5"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/scripts2/dolimitbw?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&bwlimit=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption5"] . ""; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request, true ); } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = ""; if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption2"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption2"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption2"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXFTP=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption2"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption4"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption4"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption4"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXPOP=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption4"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption8"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption8"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption8"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXSQL=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption8"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption10"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption10"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption10"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXSUB=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption10"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption12"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption12"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption12"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXPARK=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption12"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption14"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption14"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption14"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "MAXADDON=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption14"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption9"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption9"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption9"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "HASCGI=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption9"] . "&"; } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption7"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption7"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption7"] ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "shell=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption7"] . "&"; } if ($OSWAP_07e5d1ddb668713ec99497bea967ec03request) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/modifyacct?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&domain=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["domain"] . "&" . $OSWAP_07e5d1ddb668713ec99497bea967ec03request; if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption13"]) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request .= "CPTHEME=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption13"]; } $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); } if (isset( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption6"] )) { $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption6"] = cpanel_costrrpl( $OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption6"] ); if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["configoption6"]) { $OSWAP_f62894f208552ce4fc2925c004559a7e = ""; $OSWAP_64fab1a4ce586b645c834ab2e08ce688 = false; $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/accountsummary?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"]; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); $OSWAP_f62894f208552ce4fc2925c004559a7e = $OSWAP_e6c01a3554937029a7821c3bda90c76b["ACCOUNTSUMMARY"]["ACCT"]["IP"]; $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/listips"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); foreach ($OSWAP_e6c01a3554937029a7821c3bda90c76b["LISTIPS"] as $OSWAP_2e29d37ed05a8087327b406a5df9d569) { if (( $OSWAP_2e29d37ed05a8087327b406a5df9d569["IP"] == $OSWAP_f62894f208552ce4fc2925c004559a7e && $OSWAP_2e29d37ed05a8087327b406a5df9d569["MAINADDR"] != "1" )) { $OSWAP_64fab1a4ce586b645c834ab2e08ce688 = true; continue; } } if (!$OSWAP_64fab1a4ce586b645c834ab2e08ce688) { foreach ($OSWAP_e6c01a3554937029a7821c3bda90c76b["LISTIPS"] as $OSWAP_2e29d37ed05a8087327b406a5df9d569) { $OSWAP_7d8c7067d18a4b22daa7f6b5b299bd7c = $OSWAP_2e29d37ed05a8087327b406a5df9d569["ACTIVE"]; $OSWAP_feca98aae73a7e04beef319618026dfaicated = $OSWAP_2e29d37ed05a8087327b406a5df9d569["DEDICATED"]; $OSWAP_ee0a0e58bbd2d03d3d67d0e023503c37 = $OSWAP_2e29d37ed05a8087327b406a5df9d569["IP"]; $OSWAP_bb2f483a7055fbd03912e6bf8930c0c8 = $OSWAP_2e29d37ed05a8087327b406a5df9d569["USED"]; if (( ( $OSWAP_7d8c7067d18a4b22daa7f6b5b299bd7c && $OSWAP_feca98aae73a7e04beef319618026dfaicated ) && !$OSWAP_bb2f483a7055fbd03912e6bf8930c0c8 )) { break; continue; } } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/setsiteip?user=" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "&ip=" . $OSWAP_ee0a0e58bbd2d03d3d67d0e023503c37; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if ($OSWAP_e6c01a3554937029a7821c3bda90c76b["SETSITEIP"]["RESULT"]["STATUS"]) { update_query( "服务", array( "专用ip" => $OSWAP_ee0a0e58bbd2d03d3d67d0e023503c37 ), array( "id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serviceid"] ) ); } } } } return "成功"; } function cpanel_LoginLink($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"]) { $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2087"; $OSWAP_b7597d4500d1c2b62193d505150fd285 = "https"; } else { $OSWAP_7f63ad337fb156ab0fa926202948b0b2 = "2086"; $OSWAP_b7597d4500d1c2b62193d505150fd285 = "http"; } if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_9ed21c0d2f12875f606b2694b8646816 = "<a href=\"" . $OSWAP_b7597d4500d1c2b62193d505150fd285 . "://" . $OSWAP_82bdfee4b92084c05ac3b384dd79c752 . ":" . $OSWAP_7f63ad337fb156ab0fa926202948b0b2 . "/xfercpanel/" . $OSWAP_6c5cee550b682ff7d674773f07a17f33["username"] . "\" target=\"_blank\" class=\"moduleloginlink\">login to control panel</a>"; return $OSWAP_9ed21c0d2f12875f606b2694b8646816; } function cpanel_UsageUpdate($OSWAP_6c5cee550b682ff7d674773f07a17f33) { if ($OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverhostname"]; } else { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverip"]; } $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/listaccts"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (( is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b ) && $OSWAP_e6c01a3554937029a7821c3bda90c76b["LISTACCTS"] )) { foreach ($OSWAP_e6c01a3554937029a7821c3bda90c76b["LISTACCTS"] as $OSWAP_e77f888b3189036b06b7d47acf75d044) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_e77f888b3189036b06b7d47acf75d044["DOMAIN"]; $OSWAP_3dd4488045df31e16a06042006e5fa6c = $OSWAP_e77f888b3189036b06b7d47acf75d044["DISKUSED"]; $OSWAP_f43905b7e3575442509a9a26123760e5 = $OSWAP_e77f888b3189036b06b7d47acf75d044["DISKLIMIT"]; $OSWAP_3dd4488045df31e16a06042006e5fa6c = str_replace( "M", "", $OSWAP_3dd4488045df31e16a06042006e5fa6c ); $OSWAP_f43905b7e3575442509a9a26123760e5 = str_replace( "M", "", $OSWAP_f43905b7e3575442509a9a26123760e5 ); if($OSWAP_f43905b7e3575442509a9a26123760e5=='unlimited') $OSWAP_f43905b7e3575442509a9a26123760e5=-1; update_query( "服务", array( "磁盘使用" => $OSWAP_3dd4488045df31e16a06042006e5fa6c, "磁盘限制" => $OSWAP_f43905b7e3575442509a9a26123760e5, "最后更新时间" => "now()" ), array( "域名" => $OSWAP_82bdfee4b92084c05ac3b384dd79c752, "服务器id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"] ) ); } } unset( $OSWAP_e6c01a3554937029a7821c3bda90c76b ); $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/showbw"; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (( is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b ) && $OSWAP_e6c01a3554937029a7821c3bda90c76b["SHOWBW"] )) { foreach ($OSWAP_e6c01a3554937029a7821c3bda90c76b["SHOWBW"]["BANDWIDTH"] as $OSWAP_e77f888b3189036b06b7d47acf75d044) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_e77f888b3189036b06b7d47acf75d044["MAINDOMAIN"]; $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5 = $OSWAP_e77f888b3189036b06b7d47acf75d044["TOTALBYTES"]; $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec = $OSWAP_e77f888b3189036b06b7d47acf75d044["LIMIT"]; $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5 = $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5 / ( 1024 * 1024 ); $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec = $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec / ( 1024 * 1024 ); if($OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec=='unlimited') $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec=-1; update_query( "服务", array( "流量使用" => $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5, "流量限制" => $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec, "最后更新时间" => "now()" ), array( "域名" => $OSWAP_82bdfee4b92084c05ac3b384dd79c752, "服务器id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"] ) ); } } unset( $OSWAP_e6c01a3554937029a7821c3bda90c76b ); $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "服务", "域名,用户名", array( "服务器id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"], "类型" => "reselleraccount" )); while ($OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 )) { $OSWAP_82bdfee4b92084c05ac3b384dd79c752 = $OSWAP_e77f888b3189036b06b7d47acf75d044["domain"]; $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name = $OSWAP_e77f888b3189036b06b7d47acf75d044["username"]; if ($OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name) { $OSWAP_07e5d1ddb668713ec99497bea967ec03request = "/xml-api/resellerstats?reseller=" . $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name; $OSWAP_e6c01a3554937029a7821c3bda90c76b = cpanel_req( $OSWAP_6c5cee550b682ff7d674773f07a17f33["serversecure"], $OSWAP_82bdfee4b92084c05ac3b384dd79c752, $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverusername"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverpassword"], $OSWAP_6c5cee550b682ff7d674773f07a17f33["serveraccesshash"], $OSWAP_07e5d1ddb668713ec99497bea967ec03request ); if (( is_array( $OSWAP_e6c01a3554937029a7821c3bda90c76b ) && $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"] )) { $OSWAP_3dd4488045df31e16a06042006e5fa6c = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["DISKUSED"]; $OSWAP_f43905b7e3575442509a9a26123760e5 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["DISKQUOTA"]; if (!$OSWAP_f43905b7e3575442509a9a26123760e5) { $OSWAP_f43905b7e3575442509a9a26123760e5 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["TOTALDISKALLOC"]; } $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5 = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["TOTALBWUSED"]; $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["BANDWIDTHLIMIT"]; if (!$OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec) { $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec = $OSWAP_e6c01a3554937029a7821c3bda90c76b["RESELLERSTATS"]["RESULT"]["TOTALBWALLOC"]; } update_query( "服务", array( "磁盘使用" => $OSWAP_3dd4488045df31e16a06042006e5fa6c, "磁盘限制" => $OSWAP_f43905b7e3575442509a9a26123760e5, "流量使用" => $OSWAP_9eb31287fb2a9cb2ea27d91141d009b5, "流量限制" => $OSWAP_c20e8ff835baa0cc44c835b1a2ccc0ec, "最后更新时间" => "now()" ), array( "域名" => $OSWAP_82bdfee4b92084c05ac3b384dd79c752, "服务器id" => $OSWAP_6c5cee550b682ff7d674773f07a17f33["serverid"] ) ); } } unset( $OSWAP_e6c01a3554937029a7821c3bda90c76b ); unset( $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5name ); unset( $OSWAP_82bdfee4b92084c05ac3b384dd79c752 ); } } function cpanel_req($OSWAP_0a8ed6f3dc111c874d0cdf929e2df303, $OSWAP_94069357985fb2ce32ce7236d060876a, $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5, $OSWAP_3fd6804806c8414bcf51fa020d02cf5a, $OSWAP_c60e16831350240eebdba39637ad069d, $OSWAP_e25200402aabc6a274ee825b6b86a3d9, $OSWAP_a27f9ca87a013d7be9d377b0412c07f0 = "") { $OSWAP_88011699082ba168d8eaa9feed91dc33 = preg_replace(base64_decode('JygKfAopJw=='), "", $OSWAP_c60e16831350240eebdba39637ad069d ); if ($OSWAP_88011699082ba168d8eaa9feed91dc33) { $OSWAP_5c6aff370744af44386873ada8be04a4str = "WHM " . $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5 . ":" . $OSWAP_88011699082ba168d8eaa9feed91dc33; } else { $OSWAP_5c6aff370744af44386873ada8be04a4str = "Basic " . base64_encode( $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5 . ":" . $OSWAP_3fd6804806c8414bcf51fa020d02cf5a ); } $OSWAP_2e29d37ed05a8087327b406a5df9d569s = array(); $ch = curl_init(); if ($OSWAP_0a8ed6f3dc111c874d0cdf929e2df303) { curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, 0 ); curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0 ); curl_setopt( $ch, CURLOPT_URL, "https://" . $OSWAP_94069357985fb2ce32ce7236d060876a . ":2087" . $OSWAP_e25200402aabc6a274ee825b6b86a3d9 ); } else { curl_setopt( $ch, CURLOPT_URL, "http://" . $OSWAP_94069357985fb2ce32ce7236d060876a . ":2086" . $OSWAP_e25200402aabc6a274ee825b6b86a3d9 ); } curl_setopt( $ch, CURLOPT_HEADER, 0 ); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 ); $OSWAP_0128d84e0fdda2495cbf22e76c1bb0cbheaders[0] = "Authorization: " . $OSWAP_5c6aff370744af44386873ada8be04a4str; curl_setopt( $ch, CURLOPT_HTTPHEADER, $OSWAP_0128d84e0fdda2495cbf22e76c1bb0cbheaders ); curl_setopt( $ch, CURLOPT_TIMEOUT, 400 ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = curl_exec( $ch ); if (curl_errno( $ch )) { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = "网络通讯错误:" . curl_error( $ch ); } else { if ($OSWAP_a27f9ca87a013d7be9d377b0412c07f0) { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = $OSWAP_e77f888b3189036b06b7d47acf75d044; } else { if (strpos( $OSWAP_e77f888b3189036b06b7d47acf75d044, "Brute Force Protection" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = "WHM施加了强力保护块协助联系的cPanel"; } else { if (strpos( $OSWAP_e77f888b3189036b06b7d47acf75d044, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = "登录失败"; } else { if (strpos( $OSWAP_e77f888b3189036b06b7d47acf75d044, "SSL encryption is required" ) == true) { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = "SSL需要登录"; } else { if (substr( $OSWAP_e77f888b3189036b06b7d47acf75d044, 0, 1 ) != "<") { $OSWAP_e77f888b3189036b06b7d47acf75d044 = substr( $OSWAP_e77f888b3189036b06b7d47acf75d044, strpos( $OSWAP_e77f888b3189036b06b7d47acf75d044, "<" ) ); } $OSWAP_2e29d37ed05a8087327b406a5df9d569s = XMLtoArray( $OSWAP_e77f888b3189036b06b7d47acf75d044 ); if ($OSWAP_2e29d37ed05a8087327b406a5df9d569s["CPANELRESULT"]["DATA"]["REASON"] == "Access denied") { $OSWAP_2e29d37ed05a8087327b406a5df9d569s = "登录失败"; } } } } } } curl_close( $ch ); unset( $OSWAP_e77f888b3189036b06b7d47acf75d044 ); return $OSWAP_2e29d37ed05a8087327b406a5df9d569s; } function getClientsDetails($OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id = "", $contactid = "") { if (!$OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id) { $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id = $_SESSION["uid"]; } $OSWAP_2e29d37ed05a8087327b406a5df9d569 = select_query( "用户", "", array( "uid" => $OSWAP_30b31a94e0c5a437f6c1c6006e473bc5id ) ); $OSWAP_e77f888b3189036b06b7d47acf75d044 = D()->fetch_array( $OSWAP_2e29d37ed05a8087327b406a5df9d569 ); $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["id"] = $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["userid"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["uid"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["firstname"] = 'SWAP'; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["lastname"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["姓名"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["companyname"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["姓名"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["email"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["电子邮件"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["address1"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["address2"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["city"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["地址"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["state"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["国家"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["postcode"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["邮编"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["country"] = $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["countrycode"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["国家"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["countryname"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["phonecc"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["phonenumber"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["电话号码"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["notes"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["password"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["密码"]; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["twofaenabled"] = false; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["currency"] = "1"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["defaultgateway"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["cctype"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["cclastfour"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["securityqid"] = "0"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["securityqans"] = decrypt(""); $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["groupid"] = "0"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["status"] = "Active"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["credit"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["taxexempt"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["latefeeoveride"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["overideduenotices"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["separateinvoices"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["disableautocc"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["emailoptout"] = "0"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["overrideautoclose"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["language"] = ""; if ($OSWAP_81f3bd2e6901fae9b77141c80405e2c3["country"] == "GB") { $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = $OSWAP_86d074049b7d7d12d5e6dae4498aa2e3 = $OSWAP_e77f888b3189036b06b7d47acf75d044["postcode"]; $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = strtoupper( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ); $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = preg_replace( "/[^A-Z0-9]/", "", $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ); if (strlen( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ) == 5) { $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 0, 2 ) . " " . substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 2 ); } else { if (strlen( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ) == 6) { $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 0, 3 ) . " " . substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 3 ); } else { if (strlen( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ) == 7) { $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 0, 4 ) . " " . substr( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode, 4 ); } else { $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = $OSWAP_86d074049b7d7d12d5e6dae4498aa2e3; } } } $OSWAP_39acd516275569f78d4b51d4c5d2244ccode = trim( $OSWAP_39acd516275569f78d4b51d4c5d2244ccode ); $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["postcode"] = $OSWAP_39acd516275569f78d4b51d4c5d2244ccode; } $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["lastlogin"] = "No Login Logged"; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["customfields"] = ""; $OSWAP_81f3bd2e6901fae9b77141c80405e2c3["billingcid"] = $OSWAP_e77f888b3189036b06b7d47acf75d044["billingcid"]; return $OSWAP_81f3bd2e6901fae9b77141c80405e2c3; } function ParseXmlToArray($OSWAP_97ad8cf7666d07da9661c70ea53188f7, $OSWAP_442ac974a5e5be219eed15687cb89b6a = array()) { $OSWAP_39142f39cec5dbdcd079786493158f62_parser = xml_parser_create(); $OSWAP_442ac974a5e5be219eed15687cb89b6a = (is_array( $OSWAP_442ac974a5e5be219eed15687cb89b6a ) ? $OSWAP_442ac974a5e5be219eed15687cb89b6a : array()); foreach ($OSWAP_442ac974a5e5be219eed15687cb89b6a as $OSWAP_0dc57985b1a04420accf1780ea43599f => $OSWAP_31bb5897a4cf8155e2d7054f8ef132dd) { xml_parser_set_option( $OSWAP_39142f39cec5dbdcd079786493158f62_parser, $OSWAP_0dc57985b1a04420accf1780ea43599f, $OSWAP_31bb5897a4cf8155e2d7054f8ef132dd ); } xml_parse_into_struct( $OSWAP_39142f39cec5dbdcd079786493158f62_parser, $OSWAP_97ad8cf7666d07da9661c70ea53188f7, $OSWAP_63e29f0f36f8e0e4b3ad59487599f02as, $OSWAP_ba876ef727049df167fa6b261ff32891 ); xml_parser_free( $OSWAP_39142f39cec5dbdcd079786493158f62_parser ); $OSWAP_6c5cee550b682ff7d674773f07a17f33 = array(); $OSWAP_46bbe6abdd3a6c4da3eb1ca8617397ed = array(); $OSWAP_82dc4a2dfc24a90b8c23e7e4826d8e89 = array(); $x = 954; foreach ($OSWAP_63e29f0f36f8e0e4b3ad59487599f02as as $OSWAP_39142f39cec5dbdcd079786493158f62_elem) { if ($OSWAP_39142f39cec5dbdcd079786493158f62_elem["type"] == "open") { if (in_array( $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"], $OSWAP_82dc4a2dfc24a90b8c23e7e4826d8e89 )) { ++$x; $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"] = $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"] . $x; } $OSWAP_46bbe6abdd3a6c4da3eb1ca8617397ed[$OSWAP_39142f39cec5dbdcd079786493158f62_elem["level"]] = $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"]; $OSWAP_82dc4a2dfc24a90b8c23e7e4826d8e89[] = $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"]; } if ($OSWAP_39142f39cec5dbdcd079786493158f62_elem["type"] == "complete") { $OSWAP_f50f47e4dca0336857d7ef78951c483c_value = (isset( $OSWAP_39142f39cec5dbdcd079786493158f62_elem["value"] ) ? $OSWAP_39142f39cec5dbdcd079786493158f62_elem["value"] : null); $OSWAP_e77f888b3189036b06b7d47acf75d044 = array( $OSWAP_39142f39cec5dbdcd079786493158f62_elem["tag"] => $OSWAP_f50f47e4dca0336857d7ef78951c483c_value ); $OSWAP_8327ecc5fcdb0ad7abef8f7e7d553dbb = $OSWAP_39142f39cec5dbdcd079786493158f62_elem["level"] - 1; while (0 < $OSWAP_8327ecc5fcdb0ad7abef8f7e7d553dbb) { $OSWAP_e77f888b3189036b06b7d47acf75d044 = array( $OSWAP_46bbe6abdd3a6c4da3eb1ca8617397ed[$OSWAP_8327ecc5fcdb0ad7abef8f7e7d553dbb] => $OSWAP_e77f888b3189036b06b7d47acf75d044 ); --$OSWAP_8327ecc5fcdb0ad7abef8f7e7d553dbb; } $OSWAP_6c5cee550b682ff7d674773f07a17f33 = array_merge_recursive( $OSWAP_6c5cee550b682ff7d674773f07a17f33, $OSWAP_e77f888b3189036b06b7d47acf75d044 ); continue; } } return $OSWAP_6c5cee550b682ff7d674773f07a17f33; } function XMLtoARRAY($OSWAP_97ad8cf7666d07da9661c70ea53188f7) { return ParseXmlToArray( $OSWAP_97ad8cf7666d07da9661c70ea53188f7 ); } function clientareatemplib($OSWAP_89720a73ec6cb9a6aca9ad17954ff42d,$OSWAP_b7da14f6d30a57d6556466c8bacc5350){ TEMPLATE::assign('pserver',$OSWAP_b7da14f6d30a57d6556466c8bacc5350); TEMPLATE::dir(SWAP_LIB."servers/".$OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型'].DS); if(file_exists(SWAP_LIB."servers/".$OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型']."/clientarea.tpl")){ if(file_exists(SWAP_LIB."servers/".$OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型']."/lang/".$GLOBALS['swap_mac']['config']['language'].".php")){ TEMPLATE::assign('plang',plug_lang_get($OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型'],'','2')); }elseif(file_exists(SWAP_LIB."servers/".$OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型']."/lang/Chinese.php")){ TEMPLATE::assign('plang',plug_lang_get($OSWAP_89720a73ec6cb9a6aca9ad17954ff42d['面板类型'],'','2')); } TEMPLATE::display('clientarea.tpl'); } TEMPLATE::dir('.'.DS.SWAP_TEMPLATES_ROOT.DS); } 
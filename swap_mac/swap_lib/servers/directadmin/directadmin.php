<?php  function directadmin_ConfigOptions() { $configarray = array( "包名" => array( "Type" => "text", "Size" => "25" ), "经销商IP" => array( "Type" => "dropdown", "Options" => ",shared,sharedreseller,assign" ), "独立IP" => array( "Type" => "yesno", "Description" => "勾选以自动分配独立IP" ), "达到限制暂停" => array( "Type" => "yesno", "Description" => "勾选为自动达到带宽限制时，暂停用户" ), "自定义DA端口" => array( "Type" => "text", "Size" => "5","Description" => "输入为自定义端口,不输入为默认2222端口" )); return $configarray; } function directadmin_ClientArea($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $lang=plug_lang_get('directadmin','','2'); $OSWAP_bc207347f5425982a794d43b62521611 = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serversecure"] ? "https" : "http"); $OSWAP_ba91c6bd035197c0a91636b3fb7557ae = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] : $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverip"]); $OSWAP_0c70de3688a7169495ae6a9445438d5e = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] : '2222'); $OSWAP_4eccbe66965a59649a66366729d044a9 = array( '<a href="javascript:document.directadmin.submit();" target="_blank">'.$lang['直接登录(自定义密码无效)'].'</a>', "<form name=\"directadmin\" action=\"" . $OSWAP_bc207347f5425982a794d43b62521611 . "://" . $OSWAP_ba91c6bd035197c0a91636b3fb7557ae . ":".$OSWAP_0c70de3688a7169495ae6a9445438d5e."/CMD_LOGIN\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"username\" value=\"" . $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"] . "\"><input type=\"hidden\" name=\"password\" value=\"" . $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"] . "\"></form>" ); return $OSWAP_4eccbe66965a59649a66366729d044a9; } function directadmin_AdminLink($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_bc207347f5425982a794d43b62521611 = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serversecure"] ? "https" : "http"); $OSWAP_ba91c6bd035197c0a91636b3fb7557ae = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] : $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverip"]); $OSWAP_0c70de3688a7169495ae6a9445438d5e = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] : '2222'); $OSWAP_4eccbe66965a59649a66366729d044a9 = "<form action=\"" . $OSWAP_bc207347f5425982a794d43b62521611 . "://" . $OSWAP_ba91c6bd035197c0a91636b3fb7557ae . ":".$OSWAP_0c70de3688a7169495ae6a9445438d5e."/CMD_LOGIN\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"username\" value=\"" . $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverusername"] . "\"><input type=\"hidden\" name=\"password\" value=\"" . $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverpassword"] . "\"><input type=\"submit\" value=\"DirectAdmin\"></form>"; return $OSWAP_4eccbe66965a59649a66366729d044a9; } function directadmin_CreateAccount($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $ip = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverip"]; if ( $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption3"]) { $OSWAP_81152e96ca8c1249b065064cd0f6f520 = "CMD_API_SHOW_RESELLER_IPS"; $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["getip"] = true; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "all"; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( $OSWAP_81152e96ca8c1249b065064cd0f6f520, $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); foreach ($OSWAP_0306ba37c674ac91ba2148d3da1786b6 as $OSWAP_f93e5c341cb997fa651bfe0a8f9cc692 => $OSWAP_6d06be4a3ec2b00f2ab385dffeee0e91) { if ($OSWAP_6d06be4a3ec2b00f2ab385dffeee0e91["status"] == "free") { $ip = $OSWAP_f93e5c341cb997fa651bfe0a8f9cc692; break; } } update_query( "服务", array( "专用ip" => $ip ), array( "id" => $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serviceid"] ) ); } $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["getip"] = ""; if (( $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption1"] == "Custom" )) { $OSWAP_81152e96ca8c1249b065064cd0f6f520 = "CMD_API_ACCOUNT_USER"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "create"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["add"] = "Submit"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["username"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["email"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["clientsdetails"]["email"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd2"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["domain"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["domain"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ip"] = $ip; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["notify"] = "no"; if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption4"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["suspend_at_limit"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Disk Space"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["quota"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Disk Space"]; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Bandwidth"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["bandwidth"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Bandwidth"]; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["FTP Accounts"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ftp"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["FTP Accounts"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["uftp"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Email Accounts"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemails"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Email Accounts"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unemails"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["MySQL Databases"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["mysql"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["MySQL Databases"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["umysql"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Subdomains"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nsubdomains"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Subdomains"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unsubdomains"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Parked Domains"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["domainptr"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Parked Domains"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["udomainptr"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Addon Domains"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["vdomains"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Addon Domains"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["uvdomains"] = "ON"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["CGI Access"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["cgi"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["cgi"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Shell Access"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ssh"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ssh"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Mailing Lists"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailml"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Mailing Lists"]; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["PHP"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["php"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["php"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["SSL"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ssl"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ssl"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["System Info"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["sysinfo"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["sysinfo"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["DNS Control"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["dnscontrol"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["dnscontrol"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Cron Jobs"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["cron"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["cron"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Catch All"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["catchall"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["catchall"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Spam Assassin"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["spam"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["spam"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Anon FTP"]) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["aftp"] = "ON"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["aftp"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Email Forwards"]) { if (is_numeric( $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Email Forwards"] )) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailf"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Email Forwards"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unemailf"] = "ON"; } } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unemailf"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Mailing Lists"]) { if (is_numeric( $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Mailing Lists"] )) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailml"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Mailing Lists"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailml"] = "ON"; } } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailml"] = "OFF"; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Auto Responders"]) { if (is_numeric( $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Auto Responders"] )) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["nemailr"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoptions"]["Auto Responders"]; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unemailr"] = "ON"; } } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["unemailr"] = "OFF"; } $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( $OSWAP_81152e96ca8c1249b065064cd0f6f520, $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"]) { if(!directadminis_utf8($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"])) $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]=mb_convert_encoding($OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"],'utf-8',"gbk"); $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]; } else { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["type"] == "虚拟主机") { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "create"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["add"] = "Submit"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["username"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["email"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["clientsdetails"]["email"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd2"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["domain"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["domain"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["package"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption1"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ip"] = $ip; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["notify"] = "no"; $OSWAP_81152e96ca8c1249b065064cd0f6f520 = "CMD_API_ACCOUNT_USER"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "create"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["add"] = "Submit"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["username"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["email"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["clientsdetails"]["email"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd2"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["domain"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["domain"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["package"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption1"]; if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption2"] == "sharedreseller") { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ip"] = "sharedreseller"; } else { if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption2"] == "assign") { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ip"] = "assign"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["ip"] = "shared"; } } $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["notify"] = "no"; $OSWAP_81152e96ca8c1249b065064cd0f6f520 = "CMD_ACCOUNT_RESELLER"; } $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = $ip = directadmin_req( $OSWAP_81152e96ca8c1249b065064cd0f6f520, $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"]) { if(!directadminis_utf8($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"])) $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]=mb_convert_encoding($OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"],'utf-8',"gbk"); $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]; } else { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadminis_utf8($OSWAP_41ad5fa4d2c41dd9cf9b252bf88c73be){ $c=0; $b=0; $OSWAP_88bc9677675209d2cf3e795b04f3fc42=0; $OSWAP_d757c3bc2bee13c07f2901140408225d=strlen($OSWAP_41ad5fa4d2c41dd9cf9b252bf88c73be); for($i=0; $i<$OSWAP_d757c3bc2bee13c07f2901140408225d; $i++){ $c=ord($OSWAP_41ad5fa4d2c41dd9cf9b252bf88c73be[$i]); if($c > 128){ if(($c >= 254)) return false; elseif($c >= 252) $OSWAP_88bc9677675209d2cf3e795b04f3fc42=6; elseif($c >= 248) $OSWAP_88bc9677675209d2cf3e795b04f3fc42=5; elseif($c >= 240) $OSWAP_88bc9677675209d2cf3e795b04f3fc42=4; elseif($c >= 224) $OSWAP_88bc9677675209d2cf3e795b04f3fc42=3; elseif($c >= 192) $OSWAP_88bc9677675209d2cf3e795b04f3fc42=2; else return false; if(($i+$OSWAP_88bc9677675209d2cf3e795b04f3fc42) > $OSWAP_d757c3bc2bee13c07f2901140408225d) return false; while($OSWAP_88bc9677675209d2cf3e795b04f3fc42 > 1){ $i++; $b=ord($OSWAP_41ad5fa4d2c41dd9cf9b252bf88c73be[$i]); if($b < 128 || $b > 191) return false; $OSWAP_88bc9677675209d2cf3e795b04f3fc42--; } } } return true; } function directadmin_TerminateAccount($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["confirmed"] = "Confirm"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["delete"] = "yes"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["select0"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_SELECT_USERS", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadmin_SuspendAccount($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "create"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["add"] = "Submit"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["user"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_API_SHOW_USER_CONFIG", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["suspended"] == "yes") { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "Account is already suspended"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["suspend"] = "Suspend/Unsuspend"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["select0"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_SELECT_USERS", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadmin_UnsuspendAccount($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "create"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["add"] = "Submit"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["user"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_API_SHOW_USER_CONFIG", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["suspended"] == "no") { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "Account is not suspended"; } else { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["suspend"] = "Suspend/Unsuspend"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["select0"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_SELECT_USERS", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadmin_ChangePassword($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["username"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["passwd2"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["password"]; $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_API_USER_PASSWD", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4, true ); if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"]) { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]; } else { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadmin_ChangePackage($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4) { $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af = array(); $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["action"] = "package"; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["user"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["username"]; $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af["package"] = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption1"]; if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["type"] == "reselleraccount") { $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_API_MODIFY_RESELLER", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); } else { $OSWAP_0306ba37c674ac91ba2148d3da1786b6 = directadmin_req( "CMD_API_MODIFY_USER", $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4 ); } if ($OSWAP_0306ba37c674ac91ba2148d3da1786b6["error"]) { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = $OSWAP_0306ba37c674ac91ba2148d3da1786b6["details"]; } else { $OSWAP_52ab82cbda89f9320c48b93f82ec51d6 = "成功"; } return $OSWAP_52ab82cbda89f9320c48b93f82ec51d6; } function directadmin_req($OSWAP_81152e96ca8c1249b065064cd0f6f520, $OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af, $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4, $OSWAP_3c778ae484f0603bafb30cf05c051d91 = "") { $OSWAP_ba91c6bd035197c0a91636b3fb7557ae = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverhostname"] : $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverip"]); $OSWAP_38226cc3a0d2b614692f7ccbe431f3b1 = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverusername"]; $OSWAP_1a04281408a5a6cfe5707a4183d8d818 = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serverpassword"]; $OSWAP_db35619882df5111eeaca0ad2be892c3 = $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["serversecure"]; $OSWAP_0c70de3688a7169495ae6a9445438d5e = ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] ? $OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["configoption5"] : '2222'); $OSWAP_015e1414b8e4c7c0cf00ba1602153478 = array(); $OSWAP_823a40f873638abbbdcdadec2bb7e8b0 = ""; foreach ($OSWAP_6b2cd08d9f6d2393cd6ee1ba16edb5af as $OSWAP_22465460953f74ea911033305cdaba96 => $OSWAP_5cd06039783cab02c3c490c9fae917e2) { $OSWAP_823a40f873638abbbdcdadec2bb7e8b0 .= "" . $OSWAP_22465460953f74ea911033305cdaba96 . "=" . urlencode( $OSWAP_5cd06039783cab02c3c490c9fae917e2 ) . "&"; } $OSWAP_5feadefba1adf0412cf09cd6d483988e = $OSWAP_38226cc3a0d2b614692f7ccbe431f3b1 . ":" . $OSWAP_1a04281408a5a6cfe5707a4183d8d818; $OSWAP_35412aa8419b8ec434b1619d9423175b = ""; $ch = curl_init(); if ($OSWAP_db35619882df5111eeaca0ad2be892c3) { curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, 0 ); curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0 ); $OSWAP_05c086d88c067df9596898c346277b9f = "https://" . $OSWAP_ba91c6bd035197c0a91636b3fb7557ae . ":".$OSWAP_0c70de3688a7169495ae6a9445438d5e."/" . $OSWAP_81152e96ca8c1249b065064cd0f6f520 . "?" . $OSWAP_823a40f873638abbbdcdadec2bb7e8b0; } else { $OSWAP_05c086d88c067df9596898c346277b9f = "http://" . $OSWAP_ba91c6bd035197c0a91636b3fb7557ae . ":".$OSWAP_0c70de3688a7169495ae6a9445438d5e."/" . $OSWAP_81152e96ca8c1249b065064cd0f6f520 . "?" . $OSWAP_823a40f873638abbbdcdadec2bb7e8b0; } curl_setopt( $ch, CURLOPT_URL, $OSWAP_05c086d88c067df9596898c346277b9f ); if ($OSWAP_3c778ae484f0603bafb30cf05c051d91) { curl_setopt( $ch, CURLOPT_POSTFIELDS, $OSWAP_823a40f873638abbbdcdadec2bb7e8b0 ); } curl_setopt( $ch, CURLOPT_HEADER, 0 ); curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 ); $OSWAP_aac151f65dbef2e5ba7478ea3426758e[0] = "Authorization: Basic " . base64_encode( $OSWAP_5feadefba1adf0412cf09cd6d483988e ); curl_setopt( $ch, CURLOPT_HTTPHEADER, $OSWAP_aac151f65dbef2e5ba7478ea3426758e ); curl_setopt( $ch, CURLOPT_TIMEOUT, 60 ); $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 = curl_exec( $ch ); if (curl_errno( $ch )) { $OSWAP_015e1414b8e4c7c0cf00ba1602153478["error"] = true; $OSWAP_015e1414b8e4c7c0cf00ba1602153478["details"] = curl_errno( $ch ) . " - " . curl_error( $ch ); $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 = curl_errno( $ch ) . " - " . curl_error( $ch ); } curl_close( $ch ); if (!$OSWAP_015e1414b8e4c7c0cf00ba1602153478["error"]) { if (strpos( $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162, "DirectAdmin Login" ) == true) { $OSWAP_015e1414b8e4c7c0cf00ba1602153478 = array( "error" => "1", "details" => "Login Failed" ); } else { if ($OSWAP_1b39fc0f52cc1d820dfb09ea976048b4["getip"]) { $OSWAP_9f9b168dfb3962af7feac6d184a5688a = unhtmlentities( $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 ); parse_str( $OSWAP_9f9b168dfb3962af7feac6d184a5688a, $OSWAP_aa07f2e899c3f4ab65f403426f25b54b ); foreach ($OSWAP_aa07f2e899c3f4ab65f403426f25b54b as $OSWAP_22465460953f74ea911033305cdaba96 => $OSWAP_5cd06039783cab02c3c490c9fae917e2) { $OSWAP_22465460953f74ea911033305cdaba96 = str_replace( "_", ".", urldecode( $OSWAP_22465460953f74ea911033305cdaba96 ) ); $OSWAP_5cd06039783cab02c3c490c9fae917e2 = explode( "&", urldecode( $OSWAP_5cd06039783cab02c3c490c9fae917e2 ) ); foreach ($OSWAP_5cd06039783cab02c3c490c9fae917e2 as $temp) { $temp = explode( "=", $temp ); $OSWAP_015e1414b8e4c7c0cf00ba1602153478[urldecode( $OSWAP_22465460953f74ea911033305cdaba96 )][$temp[0]] = $temp[1]; } } } else { $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 = explode( "&", $OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 ); foreach ($OSWAP_7b53e42bc717bdedbd51dd1c37b2d162 as $temp) { $temp = explode( "=", $temp ); $OSWAP_015e1414b8e4c7c0cf00ba1602153478[$temp[0]] = $temp[1]; } } } } return $OSWAP_015e1414b8e4c7c0cf00ba1602153478; } function unhtmlentities($OSWAP_6e7b1a1105691e41bea2c39767c81cbb) { return preg_replace( "~&#([0-9][0-9])~e", "chr(\1)", $OSWAP_6e7b1a1105691e41bea2c39767c81cbb ); } 
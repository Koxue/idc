<?php  function VistaPanel_ConfigOptions() { $configarray = array( "WHM包名" => array( "Type" => "text", "Size" => "25" ), "最多FTP帐号" => array( "Type" => "text", "Size" => "5" ), "空间限制" => array( "Type" => "text", "Size" => "5", "Description" => "MB" ), "最多Email帐号" => array( "Type" => "text", "Size" => "5" ), "流量限制" => array( "Type" => "text", "Size" => "5", "Description" => "MB" ), "专用IP" => array( "Type" => "yesno" ), "Shell权限" => array( "Type" => "yesno", "Description" => "给予Shell权限" ), "最多SQL数据库" => array( "Type" => "text", "Size" => "5" ), "CGI权限" => array( "Type" => "yesno", "Description" => "给予CGI权限" ), "最多子域名" => array( "Type" => "text", "Size" => "5" ), "Frontpage扩展" => array( "Type" => "yesno", "Description" => "给予Frontpage扩展" ), "最多域名停放" => array( "Type" => "text", "Size" => "5" ), "cPanel主题" => array( "Type" => "text", "Size" => "15" ), "最多附加域名" => array( "Type" => "text", "Size" => "5" ), "经销商用户数量限制" => array( "Type" => "text", "Size" => "5", "Description" => "输入经销商可以销售的最大数量账户" ), "经销商权限限制" => array( "Type" => "yesno", "Description" => "选中来限制经销商的资源使用" ), "经销商空间限制" => array( "Type" => "text", "Size" => "7", "Description" => "MB" ), "经销商流量限制" => array( "Type" => "text", "Size" => "7", "Description" => "MB" ), "允许空间超买" => array( "Type" => "yesno", "Description" => "MB" ), "允许流量超买" => array( "Type" => "yesno", "Description" => "MB" ), "经销商ACL列表" => array( "Type" => "text", "Size" => "20" ), "添加包名前缀" => array( "Type" => "yesno", "Description" => "在包名前面加上 用户名_包名 如果是购买的分销主机基本都是这样的格式" ), "配置域名服务器" => array( "Type" => "yesno", "Description" => "安装 ns1/ns2 NS服务器" ), "经销商所有权" => array( "Type" => "yesno", "Description" => "设置经销商有自己的账户" ), "VistaPanel 登陆地址" => array( "Type" => "text", "Description" => "必填* 每个VistaPanel都有自己的登陆地址,要输入完整地址结尾要带/login.php" ) ); return $configarray; } function VistaPanel_ClientArea($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { $lang=plug_lang_get('VistaPanel','','2'); $OSWAP_5c3e109a22e611c356bebdcfa8787c1f = array('<a href="javascript:document.vistapanellogin.submit();" target="_blank">'.$lang['直接登录(自定义密码无效)'].'</a>'); return $OSWAP_5c3e109a22e611c356bebdcfa8787c1f; } function VistaPanel_AdminLink($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { $OSWAP_dd78d87d55a997f24e60a3baf0e0976b = "2087"; $OSWAP_6470eefda275e99abe73bc6d1558bc46 = "https"; if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverhostname"]) { $OSWAP_57ee3cbee054f42b5130b7177f0f8806 = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverhostname"]; } else { $OSWAP_57ee3cbee054f42b5130b7177f0f8806 = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"]; } $OSWAP_5c3e109a22e611c356bebdcfa8787c1f = "<form action=\"" . $OSWAP_6470eefda275e99abe73bc6d1558bc46 . "://" . $OSWAP_57ee3cbee054f42b5130b7177f0f8806 . ":" . $OSWAP_dd78d87d55a997f24e60a3baf0e0976b . "/login/\" method=\"post\" target=\"_blank\"><input type=\"hidden\" name=\"user\" value=\"" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"] . "\" /><input type=\"hidden\" name=\"pass\" value=\"" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"] . "\" /><input type=\"submit\" value=\"WHM\" /></form>"; return $OSWAP_5c3e109a22e611c356bebdcfa8787c1f; } function VistaPanel_costrrpl($OSWAP_26f60811e87dd8d9f42e89cf5936b4c5) { $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = str_replace( "MB", "", $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 ); $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = str_replace( "Accounts", "", $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 ); $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = trim( $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 ); if ($OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 == "Yes") { $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = "on"; } else { if ($OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 == "No") { $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = ""; } else { if ($OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 == "Unlimited") { $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5 = "unlimited"; } } } return $OSWAP_26f60811e87dd8d9f42e89cf5936b4c5; } function VistaPanel_CreateAccount($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption6"]) { $OSWAP_7253365014d30f6a650ac791001e8e8a = "y"; } else { $OSWAP_7253365014d30f6a650ac791001e8e8a = "n"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption9"]) { $OSWAP_3ffc28379cffb132b46a9c08713b0b38 = "y"; } else { $OSWAP_3ffc28379cffb132b46a9c08713b0b38 = "n"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption7"]) { $OSWAP_9ac5a32f246031ee99caf232525e1d64 = "y"; } else { $OSWAP_9ac5a32f246031ee99caf232525e1d64 = "n"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption11"]) { $OSWAP_68281186be9da9ef94da62d6e3c35823 = "y"; } else { $OSWAP_68281186be9da9ef94da62d6e3c35823 = "n"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption22"]) { $OSWAP_e89c185bc4970331c6087c3284096aeb = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"] . "_"; } else { $OSWAP_e89c185bc4970331c6087c3284096aeb = ""; } $OSWAP_848b5ed4c55eafa1006e1a193731596d = array(); $OSWAP_848b5ed4c55eafa1006e1a193731596d["username"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["password"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["password"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["domain"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["domain"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["plan"] = $OSWAP_e89c185bc4970331c6087c3284096aeb . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption1"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["savepkg"] = 0; $OSWAP_848b5ed4c55eafa1006e1a193731596d["featurelist"] = "default"; $OSWAP_848b5ed4c55eafa1006e1a193731596d["quota"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption3"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["bwlimit"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption5"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["ip"] = $OSWAP_7253365014d30f6a650ac791001e8e8a; $OSWAP_848b5ed4c55eafa1006e1a193731596d["cgi"] = $OSWAP_3ffc28379cffb132b46a9c08713b0b38; $OSWAP_848b5ed4c55eafa1006e1a193731596d["frontpage"] = $OSWAP_68281186be9da9ef94da62d6e3c35823; $OSWAP_848b5ed4c55eafa1006e1a193731596d["hasshell"] = $OSWAP_9ac5a32f246031ee99caf232525e1d64; $OSWAP_848b5ed4c55eafa1006e1a193731596d["contactemail"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["clientsdetails"]["email"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["cpmod"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption13"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxftp"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption2"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxsql"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption8"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxpop"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption4"]; if ($OSWAP_43960e5d0ae7c865f467d3b1db131d65) { $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxlst"] = $OSWAP_43960e5d0ae7c865f467d3b1db131d65; } $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxsub"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption10"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxpark"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption12"]; $OSWAP_848b5ed4c55eafa1006e1a193731596d["maxaddon"] = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption14"]; if ($languageco) { $OSWAP_848b5ed4c55eafa1006e1a193731596d["language"] = $languageco; } $OSWAP_848b5ed4c55eafa1006e1a193731596d["reseller"] = 0; $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/createacct?"; foreach ($OSWAP_848b5ed4c55eafa1006e1a193731596d as $k => $v) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "" . $k . "=" . urlencode( $v ) . "&"; } $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["CREATEACCT"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["CREATEACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } if ($OSWAP_7253365014d30f6a650ac791001e8e8a == "y") { $OSWAP_7720d2bc8b3f81bec6d1b3708bc40fa1 = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["CREATEACCT"]["RESULT"]["OPTIONS"]["IP"]; update_query( "服务", array( "专用ip" => $OSWAP_7720d2bc8b3f81bec6d1b3708bc40fa1 ), array( "id" => $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serviceid"] ) ); } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["type"] == "reselleraccount") { $OSWAP_cd6c9a490146d2dd6044281d420e02ef = ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption24"] ? 1 : 0); $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setupreseller?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&makeowner=" . $OSWAP_cd6c9a490146d2dd6044281d420e02ef; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETUPRESELLER"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETUPRESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setresellerlimits?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption16"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_resource_limits=1&diskspace_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption17"] ) . "&bandwidth_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption18"] ); if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption19"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_overselling_diskspace=1"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption20"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_overselling_bandwidth=1"; } } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption15"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_account_limit=1&account_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption15"] ); } $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERLIMITS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERLIMITS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setacls?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&acllist=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption21"] ); $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption23"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setresellernameservers?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&nameservers=ns1." . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["domain"] . ",ns2." . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["domain"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERNAMESERVERS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERNAMESERVERS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } } return "成功"; } function VistaPanel_SuspendAccount($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if (!$OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["type"] == "reselleraccount") { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/scripts/suspendreseller?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&resalso=1"; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86, true ); if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "Curl Error" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "登录失败"; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "account has been suspended" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "成功"; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "Account Already Suspended" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "帐户已经暂停"; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "You do not have permission to suspend that account" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "您没有权限暂停帐户"; } else { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "出现未知错误"; } } } } } return $OSWAP_b9837267a1f79295e638dd5394753bc2; } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/suspendacct?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&reason=" . urlencode('Maturity has not been renewed'); $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SUSPENDACCT"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SUSPENDACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } return "成功"; } function VistaPanel_UnsuspendAccount($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if (!$OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["type"] == "reselleraccount") { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/scripts/suspendreseller?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&resalso=1&un=1"; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86, true ); if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "Curl Error" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "登录失败"; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "does not exist" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "帐户不存在"; } else { if (strpos( $OSWAP_4fa411b7befeedf54dc2fcecdc775818, "Complete!" ) == true) { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "成功"; } else { $OSWAP_b9837267a1f79295e638dd5394753bc2 = "出现未知错误"; } } } } return $OSWAP_b9837267a1f79295e638dd5394753bc2; } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/unsuspendacct?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["UNSUSPENDACCT"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["UNSUSPENDACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } return "成功"; } function VistaPanel_TerminateAccount($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if (!$OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]) { return "无法执行,因为没有获取到帐户的用户名"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["type"] == "reselleraccount") { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/terminatereseller?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&terminatereseller=1&verify=I%20understand%20this%20will%20irrevocably%20remove%20all%20the%20accounts%20owned%20by%20the%20reseller%20" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["TERMINATERESELLER"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["TERMINATERESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } else { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/removeacct?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["REMOVEACCT"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["REMOVEACCT"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } return "成功"; } function VistaPanel_ChangePassword($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/passwd?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&pass=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["password"] ); $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["PASSWD"]["PASSWD1"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["PASSWD"]["PASSWD1"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } return "成功"; } function VistaPanel_ChangePackage($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption22"]) { $OSWAP_e89c185bc4970331c6087c3284096aeb = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"] . "_"; } else { $OSWAP_e89c185bc4970331c6087c3284096aeb = ""; } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/listresellers"; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86, true ); $OSWAP_85275bbfd7e7ecd86304b30c5711d05d = xml_parser_create(); xml_parser_set_option( $OSWAP_85275bbfd7e7ecd86304b30c5711d05d, XML_OPTION_CASE_FOLDING, 0 ); xml_parser_set_option( $OSWAP_85275bbfd7e7ecd86304b30c5711d05d, XML_OPTION_SKIP_WHITE, 1 ); xml_parse_into_struct( $OSWAP_85275bbfd7e7ecd86304b30c5711d05d, $OSWAP_4fa411b7befeedf54dc2fcecdc775818, $OSWAP_11e092561e6999d1f4c2394ad2f55d66 ); xml_parser_free( $OSWAP_85275bbfd7e7ecd86304b30c5711d05d ); $OSWAP_bbb3de52a99e53d4190ecf4c1f9492cb = array(); foreach ($OSWAP_11e092561e6999d1f4c2394ad2f55d66 as $OSWAP_b0c3dbb1ccaed0b307552ad76a576bf6) { if ($OSWAP_b0c3dbb1ccaed0b307552ad76a576bf6["tag"] == "reseller") { $OSWAP_bbb3de52a99e53d4190ecf4c1f9492cb[] = $OSWAP_b0c3dbb1ccaed0b307552ad76a576bf6["value"]; continue; } } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["type"] == "reselleraccount") { if (!in_array( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"], $OSWAP_bbb3de52a99e53d4190ecf4c1f9492cb )) { $OSWAP_cd6c9a490146d2dd6044281d420e02ef = ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption24"] ? 1 : 0); $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setupreseller?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&makeowner=" . $OSWAP_cd6c9a490146d2dd6044281d420e02ef; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETUPRESELLER"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETUPRESELLER"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption21"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setacls?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&acllist=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption21"] ); $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setresellerlimits?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption16"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_resource_limits=1&diskspace_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption17"] ) . "&bandwidth_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption18"] ); if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption19"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_overselling_diskspace=1"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption20"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_overselling_bandwidth=1"; } } else { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_resource_limits=0"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption15"]) { if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption15"] == "unlimited") { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_account_limit=1&account_limit="; } else { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_account_limit=1&account_limit=" . urlencode( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption15"] ); } } else { $OSWAP_6167cdb42c62aff91e39364c79be9b86 .= "&enable_account_limit=0&account_limit="; } $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERLIMITS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETRESELLERLIMITS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption21"]) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/setacls?reseller=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&acllist=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption21"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETACLS"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } } else { if (in_array( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"], $OSWAP_bbb3de52a99e53d4190ecf4c1f9492cb )) { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/unsetupreseller?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption1"] != "Custom") { $OSWAP_6167cdb42c62aff91e39364c79be9b86 = "/xml-api/changepackage?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&pkg=" . urlencode( $OSWAP_e89c185bc4970331c6087c3284096aeb . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption1"] ); $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_6167cdb42c62aff91e39364c79be9b86 ); if (!is_array( $OSWAP_4fa411b7befeedf54dc2fcecdc775818 )) { return $OSWAP_4fa411b7befeedf54dc2fcecdc775818; } if (!$OSWAP_4fa411b7befeedf54dc2fcecdc775818["CHANGEPACKAGE"]["RESULT"]["STATUS"]) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["CHANGEPACKAGE"]["RESULT"]["STATUSMSG"]; if (!$OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba) { $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba = "出现未知错误"; } return $OSWAP_ffe5a51b51b59ffdd2fe2ac07c351dba; } } } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption3"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption3"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption3"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd = "/scripts/editquota?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&quota=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption3"] . ""; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd, true ); } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption5"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption5"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption5"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd = "/scripts2/dolimitbw?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&bwlimit=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption5"] . ""; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd, true ); } $OSWAP_028d550c0c7ede439b445fea41273dbd = ""; if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption2"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption2"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption2"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXFTP=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption2"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption4"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption4"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption4"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXPOP=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption4"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption8"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption8"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption8"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXSQL=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption8"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption10"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption10"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption10"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXSUB=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption10"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption12"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption12"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption12"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXPARK=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption12"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption14"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption14"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption14"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "MAXADDON=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption14"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption9"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption9"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption9"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "HASCGI=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption9"] . "&"; } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption7"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption7"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption7"] ); $OSWAP_028d550c0c7ede439b445fea41273dbd .= "shell=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption7"] . "&"; } if ($OSWAP_028d550c0c7ede439b445fea41273dbd) { $OSWAP_028d550c0c7ede439b445fea41273dbd = "/xml-api/modifyacct?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&domain=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["domain"] . "&" . $OSWAP_028d550c0c7ede439b445fea41273dbd; if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption13"]) { $OSWAP_028d550c0c7ede439b445fea41273dbd .= "CPTHEME=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption13"]; } $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd ); } if (isset( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption6"] )) { $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption6"] = cpanel_costrrpl( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption6"] ); if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["configoption6"]) { $OSWAP_1d06630dcf2844e81cd25750ee3203da = ""; $OSWAP_61f11e0ae8865914f350b4066a21bc49 = false; $OSWAP_028d550c0c7ede439b445fea41273dbd = "/xml-api/accountsummary?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"]; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd ); $OSWAP_1d06630dcf2844e81cd25750ee3203da = $OSWAP_4fa411b7befeedf54dc2fcecdc775818["ACCOUNTSUMMARY"]["ACCT"]["IP"]; $OSWAP_028d550c0c7ede439b445fea41273dbd = "/xml-api/listips"; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd ); foreach ($OSWAP_4fa411b7befeedf54dc2fcecdc775818["LISTIPS"] as $OSWAP_b9837267a1f79295e638dd5394753bc2) { if (( $OSWAP_b9837267a1f79295e638dd5394753bc2["IP"] == $OSWAP_1d06630dcf2844e81cd25750ee3203da && $OSWAP_b9837267a1f79295e638dd5394753bc2["MAINADDR"] != "1" )) { $OSWAP_61f11e0ae8865914f350b4066a21bc49 = true; continue; } } if (!$OSWAP_61f11e0ae8865914f350b4066a21bc49) { foreach ($OSWAP_4fa411b7befeedf54dc2fcecdc775818["LISTIPS"] as $OSWAP_b9837267a1f79295e638dd5394753bc2) { $OSWAP_a778873fa4f754e4b245f6d28d402646 = $OSWAP_b9837267a1f79295e638dd5394753bc2["ACTIVE"]; $OSWAP_726df0c7432c0d13a14a1e60e5fd85a3 = $OSWAP_b9837267a1f79295e638dd5394753bc2["DEDICATED"]; $OSWAP_5bcc1c70a87b78f36b344802d87cb53e = $OSWAP_b9837267a1f79295e638dd5394753bc2["IP"]; $OSWAP_6638c63702249beb7007c20d6eb303bb = $OSWAP_b9837267a1f79295e638dd5394753bc2["USED"]; if (( ( $OSWAP_a778873fa4f754e4b245f6d28d402646 && $OSWAP_726df0c7432c0d13a14a1e60e5fd85a3 ) && !$OSWAP_6638c63702249beb7007c20d6eb303bb )) { break; continue; } } $OSWAP_028d550c0c7ede439b445fea41273dbd = "/xml-api/setsiteip?user=" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "&ip=" . $OSWAP_5bcc1c70a87b78f36b344802d87cb53e; $OSWAP_4fa411b7befeedf54dc2fcecdc775818 = VistaPanel_req( $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverusername"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverpassword"], $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serveraccesshash"], $OSWAP_028d550c0c7ede439b445fea41273dbd ); if ($OSWAP_4fa411b7befeedf54dc2fcecdc775818["SETSITEIP"]["RESULT"]["STATUS"]) { update_query( "服务", array( "专用ip" => $OSWAP_5bcc1c70a87b78f36b344802d87cb53e ), array( "id" => $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serviceid"] ) ); } } } } return "成功"; } function VistaPanel_LoginLink($OSWAP_e334deedd0dccd17cd5bff632efdaf0e) { if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serversecure"]) { $OSWAP_dd78d87d55a997f24e60a3baf0e0976b = "2087"; $OSWAP_6470eefda275e99abe73bc6d1558bc46 = "https"; } else { $OSWAP_dd78d87d55a997f24e60a3baf0e0976b = "2086"; $OSWAP_6470eefda275e99abe73bc6d1558bc46 = "http"; } if ($OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverhostname"]) { $OSWAP_57ee3cbee054f42b5130b7177f0f8806 = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverhostname"]; } else { $OSWAP_57ee3cbee054f42b5130b7177f0f8806 = $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["serverip"]; } $OSWAP_5c3e109a22e611c356bebdcfa8787c1f = "<a href=\"" . $OSWAP_6470eefda275e99abe73bc6d1558bc46 . "://" . $OSWAP_57ee3cbee054f42b5130b7177f0f8806 . ":" . $OSWAP_dd78d87d55a997f24e60a3baf0e0976b . "/xferVistaPanel/" . $OSWAP_e334deedd0dccd17cd5bff632efdaf0e["username"] . "\" target=\"_blank\" class=\"moduleloginlink\">login to control panel</a>"; return $OSWAP_5c3e109a22e611c356bebdcfa8787c1f; } function VistaPanel_req($OSWAP_56314ce97d624a01d1269e3ac5ef2c5f, $OSWAP_0d0b6e2e6334158516118fd5998acf42, $OSWAP_0242bc361740cfa3310b9e028caefc6e, $OSWAP_54e911ffbda92bfde31c8d2a04466cba, $OSWAP_8ae8585fe3abb748ee653e1c86b93e73, $OSWAP_069d853bcdb230a9a4aacec43a9ce363, $OSWAP_a67f22e1bc8454e5006207ba90a979c0 = "") { $OSWAP_b109d4392013cac1a11eb047150e57d8 = preg_replace( "'(
|
)'", "", $OSWAP_8ae8585fe3abb748ee653e1c86b93e73 ); if ($OSWAP_b109d4392013cac1a11eb047150e57d8) { $OSWAP_ed6534815e7714cc86add82efd536142 = "WHM " . $OSWAP_0242bc361740cfa3310b9e028caefc6e . ":" . $OSWAP_b109d4392013cac1a11eb047150e57d8; } else { $OSWAP_ed6534815e7714cc86add82efd536142 = "Basic " . base64_encode( $OSWAP_0242bc361740cfa3310b9e028caefc6e . ":" . $OSWAP_54e911ffbda92bfde31c8d2a04466cba ); } $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = array(); $ch = curl_init(); if ($OSWAP_56314ce97d624a01d1269e3ac5ef2c5f) { curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, 0 ); curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0 ); curl_setopt( $ch, CURLOPT_URL, "https://" . $OSWAP_0d0b6e2e6334158516118fd5998acf42 . ":2087" . $OSWAP_069d853bcdb230a9a4aacec43a9ce363 ); } else { curl_setopt( $ch, CURLOPT_URL, "http://" . $OSWAP_0d0b6e2e6334158516118fd5998acf42 . ":2086" . $OSWAP_069d853bcdb230a9a4aacec43a9ce363 ); } curl_setopt( $ch, CURLOPT_HEADER, 0 ); curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1 ); $OSWAP_bf46e5c4e61099396af975b585b9b4de[0] = "Authorization: " . $OSWAP_ed6534815e7714cc86add82efd536142; curl_setopt( $ch, CURLOPT_HTTPHEADER, $OSWAP_bf46e5c4e61099396af975b585b9b4de ); curl_setopt( $ch, CURLOPT_TIMEOUT, 400 ); $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf = curl_exec( $ch ); if (curl_errno( $ch )) { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = "(Curl Error) " . curl_error( $ch ) . " - code: " . curl_errno( $ch ) . ""; } else { if ($OSWAP_a67f22e1bc8454e5006207ba90a979c0) { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf; } else { if (strpos( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, "Brute Force Protection" ) == true) { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = "WHM施加了强力保护块协助联系的cPanel"; } else { if (strpos( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, "<form action=\"/login/\" method=\"POST\">" ) == true) { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = "登录失败"; } else { if (strpos( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, "SSL encryption is required" ) == true) { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = "SSL需要登录"; } else { if (substr( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, 0, 1 ) != "<") { $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf = substr( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, strpos( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf, "<" ) ); } $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = XMLtoArray( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf ); if ($OSWAP_b977e88dbfee6518b8223d0d30fdd830["VistaPanelRESULT"]["DATA"]["REASON"] == "Access denied") { $OSWAP_b977e88dbfee6518b8223d0d30fdd830 = "登录失败"; } } } } } } curl_close( $ch ); $OSWAP_73e5c2b77096568ee485b02bd084daa0 = explode( "?", $OSWAP_069d853bcdb230a9a4aacec43a9ce363 ); $OSWAP_73e5c2b77096568ee485b02bd084daa0 = $OSWAP_73e5c2b77096568ee485b02bd084daa0[0]; $OSWAP_73e5c2b77096568ee485b02bd084daa0 = str_replace( "/xml-api/", "", $OSWAP_73e5c2b77096568ee485b02bd084daa0 ); unset( $OSWAP_2142ddaebc597bf8c2054b4a09ddfabf ); return $OSWAP_b977e88dbfee6518b8223d0d30fdd830; } function VistaPanel_ClientAreaLIB($OSWAP_ea11ef8c7d5c74318b8b468d0fdfaa8f,&$OSWAP_61bff2cee482c1a5ec694f8d81a04ec6) { $OSWAP_f6dca2d7eea1c02918039fe3f02a8300['登陆地址']=$OSWAP_ea11ef8c7d5c74318b8b468d0fdfaa8f['配置选项25']; $OSWAP_f6dca2d7eea1c02918039fe3f02a8300['用户名']=$OSWAP_61bff2cee482c1a5ec694f8d81a04ec6['用户名']; $OSWAP_f6dca2d7eea1c02918039fe3f02a8300['密码']=$OSWAP_61bff2cee482c1a5ec694f8d81a04ec6['密码']; $OSWAP_61bff2cee482c1a5ec694f8d81a04ec6['主机名']=''; $OSWAP_61bff2cee482c1a5ec694f8d81a04ec6['ip地址']=''; TEMPLATE::assign('VistaPanel',$OSWAP_f6dca2d7eea1c02918039fe3f02a8300); } add_swap_plug('产品控制面板详情','VistaPanel_ClientAreaLIB'); 
<?php  function vesta_ConfigOptions() { $configarray = array( "包名称" => array( "Type" => "text", "Description" => "默认 : default"), "SSH 访问" => array( "Type" => "yesno", "Description" => "勾选授予访问权限"), "IP地址 (可选)" => array( "Type" => "text" ) ); return $configarray; } function vesta_CreateAccount($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-add-user', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"], 'arg2' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["password"], 'arg3' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["clientsdetails"]["email"], 'arg4' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["configoption1"], 'arg5' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["clientsdetails"]["firstname"], 'arg6' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["clientsdetails"]["lastname"], ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); if((($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') or (strstr($OSWAP_529a74afdf2fc23858fb694e86a21b45,'Error: user') and strstr($OSWAP_529a74afdf2fc23858fb694e86a21b45,'exists'))) && ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["configoption2"] == 'on')) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-change-user-shell', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"], 'arg2' => 'bash' ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if((($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') or (strstr($OSWAP_529a74afdf2fc23858fb694e86a21b45,'Error: user') and strstr($OSWAP_529a74afdf2fc23858fb694e86a21b45,'exists'))) && (!empty($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["domain"]))) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-add-domain', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"], 'arg2' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["domain"], 'arg3' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["configoption3"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK' or $OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'Error: argument extentions is not valid (empty)
' or $OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'Error: argument extentions is not valid (empty)
Error: Limit reached / Upgrade package
' or 'Error: Limit reached / Upgrade package
' ) { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_TerminateAccount($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-delete-user', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_SuspendAccount($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-suspend-user', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_UnsuspendAccount($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-unsuspend-user', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_ChangePassword($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-change-user-password', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"], 'arg2' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["password"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_ChangePackage($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { if ($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["server"] == 1) { $OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7 = array( 'user' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"], 'password' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"], 'hash' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serveraccesshash"], 'cmd' => 'v-change-user-package', 'arg1' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"], 'arg2' => $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["configoption1"] ); $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6 = http_build_query($OSWAP_dd93e97584bc0bc39c75b7fbb42d71d7); $OSWAP_524286af555550fb8b36218cfcbd2add = curl_init(); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_URL, 'https://' . $OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"] . ':8083/api/'); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_RETURNTRANSFER,true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POST, true); curl_setopt($OSWAP_524286af555550fb8b36218cfcbd2add, CURLOPT_POSTFIELDS, $OSWAP_0ba23bc8fc109a503a4409ef4768e1a6); $OSWAP_529a74afdf2fc23858fb694e86a21b45 = curl_exec($OSWAP_524286af555550fb8b36218cfcbd2add); } if($OSWAP_529a74afdf2fc23858fb694e86a21b45 == 'OK') { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = "成功"; } else { $OSWAP_04a8621dea8adf5c5f8d974b000960c4 = $OSWAP_529a74afdf2fc23858fb694e86a21b45; } return $OSWAP_04a8621dea8adf5c5f8d974b000960c4; } function vesta_ClientArea($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { $lang=plug_lang_get('vesta','','2'); $OSWAP_e7dc6fd623faca4fdb0f1f6b8552c3c3 = array( '<a href="javascript:document.vestalogin.submit();" target="_blank">'.$lang['直接登录(自定义密码无效)'].'</a>', '<form name="vestalogin" action="https://'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"].':8083/login/" method="post" target="_blank"><input type="hidden" name="user" value="'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["username"].'" /><input type="hidden" name="password" value="'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["password"].'" /></form>', '<a href="http://'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"].'/webmail" target="_blank">'.$lang['登陆WEBMAIL'].'</a>' ); return $OSWAP_e7dc6fd623faca4fdb0f1f6b8552c3c3; } function vesta_AdminLink($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { $OSWAP_e7dc6fd623faca4fdb0f1f6b8552c3c3 = '<form action="https://'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"].':8083/login/" method="post" target="_blank">
<input type="hidden" name="user" value="'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverusername"].'" />
<input type="hidden" name="password" value="'.$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverpassword"].'" />
<input type="submit" value="Login to Control Panel" />
</form>'; return $OSWAP_e7dc6fd623faca4fdb0f1f6b8552c3c3; } function vesta_LoginLink($OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5) { echo "<a href=\"https://".$OSWAP_ac2cc2b6eee7f4eafcdb53bfb709ebc5["serverhostname"].":8083/login/\" target=\"_blank\" style=\"color:#cc0000\">control panel</a>"; } 
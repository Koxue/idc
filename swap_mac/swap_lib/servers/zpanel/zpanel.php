<?php  requirer('xmwsclient.class.php','zpanel'); function zpanel_ConfigOptions() { $configarray = array( "包名称" => array("Type" => "text", "Size" => "25",), "分销商" => array("Type" => "yesno", "Description" => "选择就是开通分销商"), ); return $configarray; } function sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { $OSWAP_6305fdff04e36f0d21d5dc6490d50062 = '10.1.0'; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_759cb274c1b3f6245ef6ce3b970b4114 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serversecure"]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "checkVersion", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<version>" . $OSWAP_6305fdff04e36f0d21d5dc6490d50062 . "</version>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_a2e08ff27018a90d0ab07771b3371803 = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['pass']; if($OSWAP_a2e08ff27018a90d0ab07771b3371803 == 'true') { return true; } else { return false; } } function zpanel_CreateAccount($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_37afbb8acfbe338e1ff8d80916f081bb = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["producttype"]; $OSWAP_96ea8702b827e1a315502600b2facaf1 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["domain"]; $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_9a2eb588cce661443d98b23607c3b076 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["password"]; $OSWAP_58e745469656497ef935ed7c050628d8 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["clientsdetails"]; $configoption1 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["configoption1"]; $configoption2 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["configoption2"]; if ($configoption2 == "yes") $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 = "2"; else $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 = "3"; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_b9b37d2513b5118ddc4eccb9cec85698 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[0]; $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_759cb274c1b3f6245ef6ce3b970b4114 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serversecure"]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "CreateClient", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<resellerid>" . $OSWAP_b9b37d2513b5118ddc4eccb9cec85698 . "</resellerid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<packageid>" . $configoption1 . "</packageid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<groupid>" . $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 . "</groupid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<fullname>" . $OSWAP_58e745469656497ef935ed7c050628d8['firstname'] . " " . $OSWAP_58e745469656497ef935ed7c050628d8['lastname'] . "</fullname>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<email>" . $OSWAP_58e745469656497ef935ed7c050628d8['email'] . "</email>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<address>" . $OSWAP_58e745469656497ef935ed7c050628d8['address1'] . "</address>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<postcode>" . $OSWAP_58e745469656497ef935ed7c050628d8['postcode'] . "</postcode>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<password>" . $OSWAP_9a2eb588cce661443d98b23607c3b076 . "</password>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<phone>" . $OSWAP_58e745469656497ef935ed7c050628d8['phonenumber'] . "</phone>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<sendmail>0</sendmail>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<emailsubject>0</emailsubject>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<emailbody>0</emailbody>"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7 = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']; if ($OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content'] != 'success') { if($OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']=='') $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']='通信失败.可能是API key等信息错误'; return $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']; } $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = '成功'; if($OSWAP_96ea8702b827e1a315502600b2facaf1 != null) { $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "getUserId", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_046a41616b171b1a9fb191767480d52d = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['uid']; if(empty($OSWAP_046a41616b171b1a9fb191767480d52d)) { return "Account Created?, error getting uid for domain setup."; } $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "domains", "CreateDomain", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<uid>" . $OSWAP_046a41616b171b1a9fb191767480d52d . "</uid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<domain>" . $OSWAP_96ea8702b827e1a315502600b2facaf1 . "</domain>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<destination> </destination>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<autohome>1</autohome>"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $content = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']; if ($content['created'] == "false") { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "账户创建成功,但是不能添加域名(FQDN必须为不存在)"; } } return $OSWAP_c72f3eeae067b1d2b9f66437e662f74a; } function zpanel_TerminateAccount($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "getUserId", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_046a41616b171b1a9fb191767480d52d = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['uid']; if (empty($OSWAP_046a41616b171b1a9fb191767480d52d)) { return "获取UID失败"; } $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "manage_clients", "DeleteClient", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<uid>" . $OSWAP_046a41616b171b1a9fb191767480d52d . "</uid>"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $content = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']; if ($content['deleted'] == "true") { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "成功"; } else { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "账户不会被删除"; } return $OSWAP_c72f3eeae067b1d2b9f66437e662f74a; } function zpanel_SuspendAccount($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "getUserId", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_046a41616b171b1a9fb191767480d52d = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['uid']; if (empty($OSWAP_046a41616b171b1a9fb191767480d52d)) { return "获取UID失败"; } $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "manage_clients", "DisableClient", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<uid>" . $OSWAP_046a41616b171b1a9fb191767480d52d . "</uid>"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $content = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']; if ($content['disabled'] == "true") { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "成功"; } else { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "帐号没有被暂停"; } return $OSWAP_c72f3eeae067b1d2b9f66437e662f74a; } function zpanel_UnsuspendAccount($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "getUserId", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_046a41616b171b1a9fb191767480d52d = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['uid']; if (empty($OSWAP_046a41616b171b1a9fb191767480d52d)) { return "获取UID失败"; } $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "manage_clients", "EnableClient", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<uid>" . $OSWAP_046a41616b171b1a9fb191767480d52d . "</uid>"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $content = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']; if ($content['enabled'] == "true") { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "成功"; } else { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "账户没有被解除暂停"; } return $OSWAP_c72f3eeae067b1d2b9f66437e662f74a; } function zpanel_ChangePassword($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_9a2eb588cce661443d98b23607c3b076 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["password"]; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_b9b37d2513b5118ddc4eccb9cec85698 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[0]; $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_759cb274c1b3f6245ef6ce3b970b4114 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serversecure"]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "ResetUserPassword", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<newpassword>" . $OSWAP_9a2eb588cce661443d98b23607c3b076 . "</newpassword>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $content = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']; if ($content['reset'] == "true") { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "成功"; } else { $OSWAP_c72f3eeae067b1d2b9f66437e662f74a = "不能更改用户的密码"; } return $OSWAP_c72f3eeae067b1d2b9f66437e662f74a; } function zpanel_ChangePackage($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { sendVersionToZPanel($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c); $OSWAP_37afbb8acfbe338e1ff8d80916f081bb = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["producttype"]; $OSWAP_96ea8702b827e1a315502600b2facaf1 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["domain"]; $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["username"]; $OSWAP_9a2eb588cce661443d98b23607c3b076 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["password"]; $OSWAP_58e745469656497ef935ed7c050628d8 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["clientsdetails"]; $configoption1 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["configoption1"]; $configoption2 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["configoption2"]; if ($configoption2 == "yes") $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 = "2"; else $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 = "3"; $OSWAP_c37c26010368e12027f5546e629ce67a = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"]; $OSWAP_73d44e13af186792f745153bbe0f05f4 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverusername"]; $OSWAP_42a7d73932e2ee301f80d1c7535b0e35 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverpassword"]; $OSWAP_cb921d5cf3898ffe05207391c8d317b2 = explode(",", $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serveraccesshash"]); $OSWAP_b9b37d2513b5118ddc4eccb9cec85698 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[0]; $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5 = $OSWAP_cb921d5cf3898ffe05207391c8d317b2[1]; $OSWAP_759cb274c1b3f6245ef6ce3b970b4114 = $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serversecure"]; $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "getUserId", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<username>" . $OSWAP_e153e7c5e9c759ea4943f8eda5627a20 . "</username>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_046a41616b171b1a9fb191767480d52d = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']['content']['uid']; if (empty($OSWAP_046a41616b171b1a9fb191767480d52d)) { return "获取UID失败"; } $OSWAP_26f044756466a486f2c8054a5c27dc8b = new xmwsclient(); $OSWAP_26f044756466a486f2c8054a5c27dc8b->InitRequest("http://" . $OSWAP_c37c26010368e12027f5546e629ce67a, "whmcs", "UpdateClient", $OSWAP_f0e6673ab702d7702e088f7b50d9e9b5, $OSWAP_73d44e13af186792f745153bbe0f05f4, $OSWAP_42a7d73932e2ee301f80d1c7535b0e35); $OSWAP_18f7d704c3043d076f8cd259d5f49462 = "<packageid>" . $configoption1 . "</packageid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<groupid>" . $OSWAP_19257be69f55520c0b1e95b64d0ba6c6 . "</groupid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<uid>" . $OSWAP_046a41616b171b1a9fb191767480d52d . "</uid>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<fullname>" . $OSWAP_58e745469656497ef935ed7c050628d8['firstname'] . " " . $OSWAP_58e745469656497ef935ed7c050628d8['lastname'] . "</fullname>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<email>" . $OSWAP_58e745469656497ef935ed7c050628d8['email'] . "</email>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<address>" . $OSWAP_58e745469656497ef935ed7c050628d8['address1'] . "</address>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<postcode>" . $OSWAP_58e745469656497ef935ed7c050628d8['postcode'] . "</postcode>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<password>" . $OSWAP_9a2eb588cce661443d98b23607c3b076 . "</password>\n"; $OSWAP_18f7d704c3043d076f8cd259d5f49462 .= "<phone>" . $OSWAP_58e745469656497ef935ed7c050628d8['phonenumber'] . "</phone>\n"; $OSWAP_26f044756466a486f2c8054a5c27dc8b->SetRequestData($OSWAP_18f7d704c3043d076f8cd259d5f49462); $OSWAP_911e9f71297eb35c84430a270e0cf8d4 = $OSWAP_26f044756466a486f2c8054a5c27dc8b->XMLDataToArray($OSWAP_26f044756466a486f2c8054a5c27dc8b->Request($OSWAP_26f044756466a486f2c8054a5c27dc8b->BuildRequest()), 0); $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7 = $OSWAP_911e9f71297eb35c84430a270e0cf8d4['xmws']; if($OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']=="success") $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']='成功'; return $OSWAP_df2d54684bfa5a2abc8e74cf9102b8d7['content']; } function zpanel_ClientArea($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { $lang=plug_lang_get('zpanel','','2'); $OSWAP_fd784d2ca1c1feae4f18b5460ff09e87 = array('<a href="http://' . $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"] . '/" target="_blank">'.$lang['登入控制面板'].'</a>', '<a href="http://' . $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c['serverip'] . '/webmail" target="_blank">'.$lang['登入Webmail'].'</a>'); return $OSWAP_fd784d2ca1c1feae4f18b5460ff09e87; } function zpanel_AdminLink($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { $OSWAP_fd784d2ca1c1feae4f18b5460ff09e87 = '<form action="http://' . $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"] . '/" method="get" target="_blank"><input type="submit" value="登入控制面板" /></form>'; return $OSWAP_fd784d2ca1c1feae4f18b5460ff09e87; } function zpanel_LoginLink($OSWAP_ff21a50199e11fbbd83cefa3f147ab2c) { echo '<a href="http://' . $OSWAP_ff21a50199e11fbbd83cefa3f147ab2c["serverip"] . '/" target="_blank" style="color:#cc0000">Login to control panel</a>'; } function convertToMBytes($OSWAP_d8de0b6923749b9e14a8e1c9c6c75328) { $OSWAP_bb2bea3002b9a40368787355ad71c6aa = substr($OSWAP_d8de0b6923749b9e14a8e1c9c6c75328, 0, -2); switch (strtoupper(substr($OSWAP_d8de0b6923749b9e14a8e1c9c6c75328, -2))) { case "KB": return (float)($OSWAP_bb2bea3002b9a40368787355ad71c6aa / 1024); case "MB": return $OSWAP_bb2bea3002b9a40368787355ad71c6aa; case "GB": return $OSWAP_bb2bea3002b9a40368787355ad71c6aa * 1024; case "TB": return $OSWAP_bb2bea3002b9a40368787355ad71c6aa * pow(1024, 2); case "PB": return $OSWAP_bb2bea3002b9a40368787355ad71c6aa * pow(1024, 3); default: return $OSWAP_d8de0b6923749b9e14a8e1c9c6c75328; } } 